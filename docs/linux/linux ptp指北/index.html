<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-linux/linux ptp指北" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">linux ptp指北 | 编程之路</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/blog/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://github.com/blog/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://github.com/blog/docs/linux/linux ptp指北"><meta data-rh="true" property="og:locale" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="linux ptp指北 | 编程之路"><meta data-rh="true" name="description" content="ptp是什么"><meta data-rh="true" property="og:description" content="ptp是什么"><link data-rh="true" rel="icon" href="/blog/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/blog/docs/linux/linux ptp指北"><link data-rh="true" rel="alternate" href="https://github.com/blog/docs/linux/linux ptp指北" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://github.com/blog/docs/linux/linux ptp指北" hreflang="x-default"><link rel="stylesheet" href="/blog/assets/css/styles.38da314a.css">
<script src="/blog/assets/js/runtime~main.7a87f3fa.js" defer="defer"></script>
<script src="/blog/assets/js/main.5655fcd3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/blog/"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/docs/intro">k8s修仙指南</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/growdu/k8s_god" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/blog/docs/intro">编程之路</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/blog/docs/how_to_learn_program">&lt;center&gt;如何学习编程&lt;/center&gt;</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/alg/B-树如何使查询更快">alg</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/blog/docs/base/">&lt;center&gt;写在前面&lt;/center&gt;</a><button aria-label="展开侧边栏分类 &#x27;&lt;center&gt;写在前面&lt;/center&gt;&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/chatgpt/chatgpt使用">chatgpt</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/cluster/C语言实现分布式自增有序的唯一ID生成算法-snowflake算法">cluster</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/code/JavaScript-work/">code</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/db/postgresql/part1">db</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/docker/docker_communication_with_host">docker</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/dpdk/day1">dpdk</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/edit/docusaurus自定义渲染内容">edit</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/es/Search UI with Elasticsearch  Elastic docs --- 使用 Elasticsearch 的搜索用户界面 弹性文档">es</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/faq/faq汇总">faq</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/blog/docs/go_web/">rest api</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/language/C语言内存使用血与泪教训">language</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/blog/docs/linux/centos搭建离线仓库">linux</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/centos搭建离线仓库">centos搭建离线仓库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/gcc attribute指北">gcc attribute指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/git指北">git指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/git高级指北">git 高级指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/kconfig和kbuild指北">kconfig和kbuild指北</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/blog/docs/linux/kernel/qemu-busybox调试linux">kernel</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux cache指北">linux cache指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/blog/docs/linux/linux ptp指北">linux ptp指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux socket编程指北">linux socket编程指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linuxUIO指北">linux UIO指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux下RANDOM和uuid的区别">linux下RANDOM和uuid的区别</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux下svn吐血指北">linux下svn吐血指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux内存管理指北">linux内存管理指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux内核指北">linux内核指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux内核模块指北">linux内核模块指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux字符设备指北">linux字符设备指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux巨页内存指北">linux巨页内存指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux常用高级命令">linux常用高级命令</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux数据预取">linux数据预取</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux目录介绍">linux目录介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux系统接口">linux常用系统接口</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux路由指北">linux路由指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/linux锁指北">linux锁指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/logrotate机制详解">logrotate机制详解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/lvm详解">lvm详解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/shell使用">shell使用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/uboot指北">uboot指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/vlan使用指北">vlan使用指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/不得不知道的linux库的装载、链接">不得不知道的linux库的装载、链接</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/内存管理之dlmalloc">内存管理之dlmalloc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/抓包指北">抓包指北</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/本地git仓库">本地git仓库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/解决SSH连接Linux超时自动断开">解决SSH连接Linux超时自动断开</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/linux/银河麒麟V10 远程桌面_银河麒麟v10远程桌面-CSDN博客">银河麒麟V10 远程桌面_银河麒麟v10远程桌面-CSDN博客</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/mail/email编程">mail</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/network/C语言网络编程库选择">network</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/openguass/opengauss dcf搭建 - 墨天轮">openguass</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/blog/docs/page/">&lt;center&gt;说明&lt;/center&gt;</a><button aria-label="展开侧边栏分类 &#x27;&lt;center&gt;说明&lt;/center&gt;&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/pgsql/PostgreSQL 时间线解析">pgsql</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/programmer_self_cultivation/linux生成coredump">programmer_self_cultivation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/protocol/fib表">protocol</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/road/左耳朵耗子的话——关于技术的一些思考">road</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/storage/nfs详解">storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/blog/docs/tools/">readme</a><button aria-label="展开侧边栏分类 &#x27;readme&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/video_work/video">video_work</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/vpp/cdu_nxp2160_ptp1588v2实现方案">vpp</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/vue/5种回到顶部的写法从实现到增强 - 小火柴的蓝色理想 - 博客园">vue</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/blog/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">linux</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">linux ptp指北</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>linux ptp指北</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ptp是什么">ptp是什么<a href="#ptp是什么" class="hash-link" aria-label="ptp是什么的直接链接" title="ptp是什么的直接链接">​</a></h2>
<p>PTP（Precision Time Protocol）精确时间协议，由IEEE1588规定，用于同步网络中两台机器的时间。1558使用延时-请求测量机制达到主从时间同步。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ptp协议相关">PTP协议相关<a href="#ptp协议相关" class="hash-link" aria-label="PTP协议相关的直接链接" title="PTP协议相关的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="时钟类型">时钟类型<a href="#时钟类型" class="hash-link" aria-label="时钟类型的直接链接" title="时钟类型的直接链接">​</a></h3>
<p>PTP按照时钟类型分为：</p>
<ul>
<li>
<p>OC</p>
<p>普通时钟</p>
</li>
<li>
<p>TC</p>
<p>透明时钟</p>
</li>
<li>
<p>BC</p>
<p>边界时钟</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="承载方式">承载方式<a href="#承载方式" class="hash-link" aria-label="承载方式的直接链接" title="承载方式的直接链接">​</a></h3>
<p>PTP报文支持多种报文承载方式：</p>
<ul>
<li>基于MAC</li>
<li>基于UDP</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="报文类型">报文类型<a href="#报文类型" class="hash-link" aria-label="报文类型的直接链接" title="报文类型的直接链接">​</a></h3>
<p>PTP报文分为事件报文和通用报文：</p>
<ul>
<li>
<p>Sync</p>
</li>
<li>
<p>Delay_Req</p>
</li>
<li>
<p>PDelay_Req</p>
</li>
<li>
<p>PDelay_Resp</p>
</li>
<li>
<p>Announce</p>
</li>
<li>
<p>Follow_Up</p>
</li>
<li>
<p>Delay_Resp</p>
</li>
<li>
<p>Pdelay_Resp_Follow_Up</p>
</li>
<li>
<p>Management</p>
</li>
<li>
<p>Signaling</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ptp报文参数">PTP报文参数<a href="#ptp报文参数" class="hash-link" aria-label="PTP报文参数的直接链接" title="PTP报文参数的直接链接">​</a></h3>
<ul>
<li>发包频率</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="时间戳发送类型">时间戳发送类型<a href="#时间戳发送类型" class="hash-link" aria-label="时间戳发送类型的直接链接" title="时间戳发送类型的直接链接">​</a></h3>
<ul>
<li>
<p>1-step</p>
<p>1-Step 在从机端更简单，因为它必须只接收一条消息，而对于两步，从时钟必须先接收两条消息才能设置自己的时间。</p>
</li>
<li>
<p>2-step</p>
<p>在发送端或主端，由于将所需信息附加到 1 步同步消息所涉及的处理工作，使用 2 步更容易。2-step 不需要在消息离开时将时间戳写入消息，这可以使 2-step 主时钟在硬件方面预先便宜。这也增加了灵活性——可以在不改变硬件的情况下改变数据包的编码方式。</p>
<p>如果使用 10 Gigabit 或更高的以太网链路，2-Step 也是唯一的选择，因为以更高比特率编码消息的时间有限。</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ptp4l">ptp4l<a href="#ptp4l" class="hash-link" aria-label="ptp4l的直接链接" title="ptp4l的直接链接">​</a></h2>
<p>ptp4l是linux下面PTP协议的实现程序，使用ptp4l可以收发ptp报文。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="命令行参数">命令行参数<a href="#命令行参数" class="hash-link" aria-label="命令行参数的直接链接" title="命令行参数的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@localhost x86</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic">#  ./ptp4l -h</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usage: ptp4l </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Delay Mechanism</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-A</span><span class="token plain">        Auto, starting with E2E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-E</span><span class="token plain">        E2E, delay request-response </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-P</span><span class="token plain">        P2P, peer delay mechanism</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Network Transport</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-2</span><span class="token plain">        IEEE </span><span class="token number" style="color:#36acaa">802.3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-4</span><span class="token plain">        UDP IPV4 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-6</span><span class="token plain">        UDP IPV6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Time Stamping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-H</span><span class="token plain">        HARDWARE </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-S</span><span class="token plain">        SOFTWARE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-L</span><span class="token plain">        LEGACY HW</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Other Options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token builtin class-name">read</span><span class="token plain"> configuration from </span><span class="token string" style="color:#e3116c">&#x27;file&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">dev</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  interface device to use, </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> example </span><span class="token string" style="color:#e3116c">&#x27;eth0&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">may be specified multiple </span><span class="token builtin class-name">times</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">dev</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  Clock device to use, default auto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ignored </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> SOFTWARE/LEGACY HW </span><span class="token function" style="color:#d73a49">time</span><span class="token plain"> stamping</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain">        slave only mode </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">overrides configuration </span><span class="token function" style="color:#d73a49">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-l</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">num</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token builtin class-name">set</span><span class="token plain"> the logging level to </span><span class="token string" style="color:#e3116c">&#x27;num&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain">        print messages to stdout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-q</span><span class="token plain">        </span><span class="token keyword" style="color:#00009f">do</span><span class="token plain"> not print messages to the syslog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-v</span><span class="token plain">        prints the software version and exits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-h</span><span class="token plain">        prints this message and exits</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用">使用<a href="#使用" class="hash-link" aria-label="使用的直接链接" title="使用的直接链接">​</a></h3>
<ul>
<li>
<p>边界时钟</p>
<p>作为边界时钟时，需要两个网口，一个网口做slaver，与上游高精度时钟同步；另一个网口做master，与下游时钟同步。</p>
<ul>
<li>IEEE 802.3</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># master</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ptp4l </span><span class="token parameter variable" style="color:#36acaa">-2</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> eth0 </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-H</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># slaver</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ptp4l </span><span class="token parameter variable" style="color:#36acaa">-2</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> eth1 </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-H</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>udp4</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># master ip</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ifconfig</span><span class="token plain"> eth0 </span><span class="token number" style="color:#36acaa">174.168</span><span class="token plain">.1.12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ptp4l </span><span class="token parameter variable" style="color:#36acaa">-4</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> eth0 </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-H</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># slaver ip</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ifconfig</span><span class="token plain"> eth1 </span><span class="token number" style="color:#36acaa">174.168</span><span class="token plain">.1.13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ptp4l </span><span class="token parameter variable" style="color:#36acaa">-4</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> eth1 </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-H</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>普通时钟</p>
<ul>
<li>
<p>IEEE 802.3</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ptp4l </span><span class="token parameter variable" style="color:#36acaa">-2</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> eth0 </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-H</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>udp4</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ifconfig</span><span class="token plain"> eth1 </span><span class="token number" style="color:#36acaa">174.168</span><span class="token plain">.1.13</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ptp4l </span><span class="token parameter variable" style="color:#36acaa">-4</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-i</span><span class="token plain"> eth1 </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-H</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置文件">配置文件<a href="#配置文件" class="hash-link" aria-label="配置文件的直接链接" title="配置文件的直接链接">​</a></h3>
<p>使用-f ptp4l.cfg指定使用配置文件。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">The configuration </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> is divided into sections. Each section starts with a line containing its name enclosed </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> brackets and it follows with settings. Each setting is placed on a separate line, it contains the name of the option and the value separated by whitespace characters. Empty lines and lines starting with </span><span class="token comment" style="color:#999988;font-style:italic"># are ignored.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The global section </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">indicated as </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">global</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> sets the program options, clock options and default port options. Other sections are port specific sections and they override the default port options. The name of the section is the name of the configured port </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e.g. </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">eth0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. Ports specified </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> the configuration </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> don</span><span class="token string" style="color:#e3116c">&#x27;t need to be specified by the -i option. An empty port section can be used to replace the command line option.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Port Options</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">logAnnounceInterval</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    The mean time interval between Announce messages. A shorter interval makes ptp4l react faster to the changes in the master-slave hierarchy. The interval should be the same in the whole domain. It&#x27;</span><span class="token plain">s specified as a power of two </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> seconds. The default is </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logSyncInterval</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The mean </span><span class="token function" style="color:#d73a49">time</span><span class="token plain"> interval between Sync messages. A shorter interval may improve accuracy of the </span><span class="token builtin class-name">local</span><span class="token plain"> clock. It</span><span class="token string" style="color:#e3116c">&#x27;s specified as a power of two in seconds. The default is 0 (1 second). </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">logMinDelayReqInterval</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    The minimum permitted mean time interval between Delay_Req messages. A shorter interval makes ptp4l react faster to the changes in the path delay. It&#x27;</span><span class="token plain">s specified as a power of two </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> seconds. The default is </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> second</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logMinPdelayReqInterval</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The minimum permitted mean </span><span class="token function" style="color:#d73a49">time</span><span class="token plain"> interval between Pdelay_Req messages. It</span><span class="token string" style="color:#e3116c">&#x27;s specified as a power of two in seconds. The default is 0 (1 second). </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">announceReceiptTimeout</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    The number of missed Announce messages before the last Announce messages expires. The default is 3. </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">transportSpecific</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    The transport specific field. Must be in the range 0 to 255. The default is 0. </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">path_trace_enabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    Enable the mechanism used to trace the route of the Announce messages. The default is 0 (disabled). </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">follow_up_info</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    Include the 802.1AS data in the Follow_Up messages if enabled. The default is 0 (disabled). </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">delay_mechanism</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    Select the delay mechanism. Possible values are E2E, P2P and Auto. The default is E2E. </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">network_transport</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    Select the network transport. Possible values are UDPv4, UDPv6 and L2. The default is UDPv4.</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">Program and Clock Options</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">twoStepFlag</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    The local clock is a two-step clock if enabled. One-step clocks are not supported yet. The default is 1 (enabled). </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">slaveOnly</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    The local clock is a slave-only clock if enabled. The default is 0 (disabled). </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">priority1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    The priority1 attribute of the local clock. It is used in the best master selection algorithm, lower values take precedence. Must be in the range 0 to 255. The default is 128. </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">priority2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    The priority2 attribute of the local clock. It is used in the best master selection algorithm, lower values take precedence. Must be in the range 0 to 255. The default is 128. </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">clockClass</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    The clockClass attribute of the local clock. It denotes the traceability of the time distributed by the grandmaster clock. The default is 248. </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">clockAccuracy</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    The clockAccuracy attribute of the local clock. It is used in the best master selection algorithm. The default is 0xFE. </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">offsetScaledLogVariance</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    The offsetScaledLogVariance attribute of the local clock. It characterizes the stability of the clock. The default is 0xFFFF. </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">domainNumber</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    The domain attribute of the local clock. The default is 0. </span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">free_running</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    Don&#x27;</span><span class="token plain">t adjust the </span><span class="token builtin class-name">local</span><span class="token plain"> clock </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> enabled. The default is </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">disabled</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">freq_est_interval</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The </span><span class="token function" style="color:#d73a49">time</span><span class="token plain"> interval over </span><span class="token function" style="color:#d73a49">which</span><span class="token plain"> is estimated the ratio of the </span><span class="token builtin class-name">local</span><span class="token plain"> and peer clock frequencies. It is specified as a power of two </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> seconds. The default is </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">assume_two_step</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Treat one-step responses as two-step </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> enabled. It is used to work around buggy </span><span class="token number" style="color:#36acaa">802</span><span class="token plain">.1AS switches. The default is </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">disabled</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tx_timestamp_retries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The number of retries to fetch the tx </span><span class="token function" style="color:#d73a49">time</span><span class="token plain"> stamp from the kernel when a message is sent. The default is </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clock_servo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The servo </span><span class="token function" style="color:#d73a49">which</span><span class="token plain"> is used to synchronize the </span><span class="token builtin class-name">local</span><span class="token plain"> clock. Currently only one servo is implemented, a PI controller. The default is pi. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pi_proportional_const</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The proportional constant of the PI controller. When </span><span class="token builtin class-name">set</span><span class="token plain"> to </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">, the value will be selected from </span><span class="token number" style="color:#36acaa">0.7</span><span class="token plain"> and </span><span class="token number" style="color:#36acaa">0.1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the hardware and software </span><span class="token function" style="color:#d73a49">time</span><span class="token plain"> stamping respectively. The default is </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pi_integral_const</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The integral constant of the PI controller. When </span><span class="token builtin class-name">set</span><span class="token plain"> to </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">, the value will be selected from </span><span class="token number" style="color:#36acaa">0.3</span><span class="token plain"> and </span><span class="token number" style="color:#36acaa">0.001</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the hardware and software </span><span class="token function" style="color:#d73a49">time</span><span class="token plain"> stamping respectively. The default is </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pi_offset_const</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The maximum offset the PI controller will correct by changing the clock frequency instead of stepping the clock. When </span><span class="token builtin class-name">set</span><span class="token plain"> to </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">, the controller will never step the clock. The default is </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ptp_dst_mac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The MAC address where should be PTP messages sent. Relevant only with L2 transport. The default is 01:1B:19:00:00:00. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p2p_dst_mac</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The MAC address where should be peer delay messages the PTP peer. Relevant only with L2 transport. The default is 01:80:C2:00:00:0E. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logging_level</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The maximum logging level of messages </span><span class="token function" style="color:#d73a49">which</span><span class="token plain"> should be printed. The default is </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LOG_INFO</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">verbose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Print messages to the standard output </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> enabled. The default is </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">disabled</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use_syslog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Print messages to the system log </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> enabled. The default is </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">enabled</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time_stamping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    The </span><span class="token function" style="color:#d73a49">time</span><span class="token plain"> stamping method. The allowed values are hardware, software and legacy. The default is hardware.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="defaultcfg">default.cfg<a href="#defaultcfg" class="hash-link" aria-label="default.cfg的直接链接" title="default.cfg的直接链接">​</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">global</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Default Data Set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">twoStepFlag             </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">slaveOnly               </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">socket_priority         </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">priority1               </span><span class="token number" style="color:#36acaa">128</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">priority2               </span><span class="token number" style="color:#36acaa">128</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">domainNumber            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#utc_offset             37</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clockClass              </span><span class="token number" style="color:#36acaa">248</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clockAccuracy           0xFE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">offsetScaledLogVariance 0xFFFF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">free_running            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">freq_est_interval       </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dscp_event              </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dscp_general            </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dataset_comparison      ieee1588</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">G.8275.defaultDS.localPriority  </span><span class="token number" style="color:#36acaa">128</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maxStepsRemoved         </span><span class="token number" style="color:#36acaa">255</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Port Data Set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logAnnounceInterval     </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logSyncInterval         </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">operLogSyncInterval     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logMinDelayReqInterval  </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logMinPdelayReqInterval </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">operLogPdelayReqInterval </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">announceReceiptTimeout  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">syncReceiptTimeout      </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delayAsymmetry          </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fault_reset_interval    </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">neighborPropDelayThresh </span><span class="token number" style="color:#36acaa">20000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">masterOnly              </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">G.8275.portDS.localPriority     </span><span class="token number" style="color:#36acaa">128</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">asCapable               auto</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BMCA                    ptp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inhibit_announce        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inhibit_delay_req       </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ignore_source_id        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Run time options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">assume_two_step         </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">logging_level           </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">path_trace_enabled      </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">follow_up_info          </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hybrid_e2e              </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inhibit_multicast_service       </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">net_sync_monitor        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tc_spanning_tree        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tx_timestamp_timeout    </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unicast_listen          </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unicast_master_table    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unicast_req_duration    </span><span class="token number" style="color:#36acaa">3600</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use_syslog              </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">verbose                 </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">summary_interval        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kernel_leap             </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">check_fup_sync          </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Servo Options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pi_proportional_const   </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pi_integral_const       </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pi_proportional_scale   </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pi_proportional_exponent        </span><span class="token parameter variable" style="color:#36acaa">-0.3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pi_proportional_norm_max        </span><span class="token number" style="color:#36acaa">0.7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pi_integral_scale       </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pi_integral_exponent    </span><span class="token number" style="color:#36acaa">0.4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pi_integral_norm_max    </span><span class="token number" style="color:#36acaa">0.3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">step_threshold          </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">first_step_threshold    </span><span class="token number" style="color:#36acaa">0.00002</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max_frequency           </span><span class="token number" style="color:#36acaa">900000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clock_servo             pi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sanity_freq_limit       </span><span class="token number" style="color:#36acaa">200000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ntpshm_segment          </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">msg_interval_request    </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">servo_num_offset_values </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">servo_offset_threshold  </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">write_phase_mode        </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Transport options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transportSpecific       0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ptp_dst_mac             01:1B:19:00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p2p_dst_mac             01:80:C2:00:00:0E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udp_ttl                 </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udp6_scope              0x0E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uds_address             /var/run/ptp4l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Default interface options</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clock_type              OC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">network_transport       UDPv4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delay_mechanism         E2E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time_stamping           hardware</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tsproc_mode             filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delay_filter            moving_median</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delay_filter_length     </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">egressLatency           </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ingressLatency          </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">boundary_clock_jbod     </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Clock description</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">productDescription      </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">revisionData            </span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">manufacturerIdentity    00:00:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userDescription         </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">timeSource              0xA0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/linux/linux ptp指北.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/docs/linux/linux cache指北"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">linux cache指北</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/docs/linux/linux socket编程指北"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">linux socket编程指北</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ptp是什么" class="table-of-contents__link toc-highlight">ptp是什么</a></li><li><a href="#ptp协议相关" class="table-of-contents__link toc-highlight">PTP协议相关</a><ul><li><a href="#时钟类型" class="table-of-contents__link toc-highlight">时钟类型</a></li><li><a href="#承载方式" class="table-of-contents__link toc-highlight">承载方式</a></li><li><a href="#报文类型" class="table-of-contents__link toc-highlight">报文类型</a></li><li><a href="#ptp报文参数" class="table-of-contents__link toc-highlight">PTP报文参数</a></li><li><a href="#时间戳发送类型" class="table-of-contents__link toc-highlight">时间戳发送类型</a></li></ul></li><li><a href="#ptp4l" class="table-of-contents__link toc-highlight">ptp4l</a><ul><li><a href="#命令行参数" class="table-of-contents__link toc-highlight">命令行参数</a></li><li><a href="#使用" class="table-of-contents__link toc-highlight">使用</a></li><li><a href="#配置文件" class="table-of-contents__link toc-highlight">配置文件</a></li><li><a href="#defaultcfg" class="table-of-contents__link toc-highlight">default.cfg</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 growdu, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>