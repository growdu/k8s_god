<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-cluster/ha/调整corosync网络波动时间操作文档" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">&lt;center&gt;调整允许的corosync网络波动时间操作步骤&lt;/center&gt; | 编程之路</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/blog/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://github.com/blog/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://github.com/blog/docs/cluster/ha/调整corosync网络波动时间操作文档"><meta data-rh="true" property="og:locale" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="&lt;center&gt;调整允许的corosync网络波动时间操作步骤&lt;/center&gt; | 编程之路"><meta data-rh="true" name="description" content="| 编写人 | 编写内容     | 编写时间       |"><meta data-rh="true" property="og:description" content="| 编写人 | 编写内容     | 编写时间       |"><link data-rh="true" rel="icon" href="/blog/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/blog/docs/cluster/ha/调整corosync网络波动时间操作文档"><link data-rh="true" rel="alternate" href="https://github.com/blog/docs/cluster/ha/调整corosync网络波动时间操作文档" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://github.com/blog/docs/cluster/ha/调整corosync网络波动时间操作文档" hreflang="x-default"><link rel="stylesheet" href="/blog/assets/css/styles.38da314a.css">
<script src="/blog/assets/js/runtime~main.7a87f3fa.js" defer="defer"></script>
<script src="/blog/assets/js/main.5655fcd3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/blog/"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/docs/intro">k8s修仙指南</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/growdu/k8s_god" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/blog/docs/intro">编程之路</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/blog/docs/how_to_learn_program">&lt;center&gt;如何学习编程&lt;/center&gt;</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/alg/B-树如何使查询更快">alg</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/blog/docs/base/">&lt;center&gt;写在前面&lt;/center&gt;</a><button aria-label="展开侧边栏分类 &#x27;&lt;center&gt;写在前面&lt;/center&gt;&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/chatgpt/chatgpt使用">chatgpt</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/blog/docs/cluster/C语言实现分布式自增有序的唯一ID生成算法-snowflake算法">cluster</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/C语言实现分布式自增有序的唯一ID生成算法-snowflake算法">C语言实现分布式自增有序的唯一ID生成算法-snowflake算法</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/C语言雪花算法,记一次雪花算法的实现">C语言雪花算法,记一次雪花算法的实现</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/blog/docs/cluster/DCF/dcf写入机制">DCF</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/Patroni详解">Patroni详解</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/blog/docs/cluster/corosync/corosy-qdevice源码阅读">corosync</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/blog/docs/cluster/ha/ha元信息常见存储方式">ha</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/ha/ha元信息常见存储方式">ha元信息常见存储方式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/ha/业界高可用解决方案">业界高可用解决方案</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/ha/中移动数据库停库问题分析">中移动数据库停库问题分析解决</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/blog/docs/cluster/ha/调整corosync网络波动时间操作文档">&lt;center&gt;调整允许的corosync网络波动时间操作步骤&lt;/center&gt;</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/blog/docs/cluster/kingbase/kingbase两地三中心日常巡检">kingbase</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/blog/docs/cluster/multi_cluster/多地多中心方案调研">multi_cluster</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/blog/docs/cluster/oracle/oracle_maa架构详解">oracle</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/blog/docs/cluster/raft/Untitled">raft</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/raft协议动态调整quorum">raft协议动态调整quorum</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/repmgr网络割裂问题">repmgr网络割裂问题</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/blog/docs/cluster/zookeeper/zookeeperC语言API编程指南">zookeeper</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/两地三中心技术指标分析">两地三中心技术指标分析（距离、延迟、丢包率）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/主流分布式高可用方案">分布式高可用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/从两地三中心到OceanBase的多地多中心 - 墨天轮">从两地三中心到OceanBase的多地多中心 - 墨天轮</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/分布式一致性协议">分布式一致性协议</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/分布式存储需要解决的问题">分布式存储需要解决的问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/分布式数据库高可用方案设计">分布式数据库高可用方案设计</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/分布式系统设计必知必会">分布式系统设计必知必会</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/分布式网络割裂问题">分布式网络割裂问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/分布式集群动态调整quorum值方案对比">数据库分布式集群动态调整quorum值方案对比</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/基于corosync的分布式应用程序开发方案分析">基于corosync的分布式应用程序开发方案分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/常用分布式实现架构">常用分布式实现架构</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/blog/docs/cluster/常用分布式解决方案">常用分布式解决方案</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/code/JavaScript-work/">code</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/db/postgresql/part1">db</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/docker/docker_communication_with_host">docker</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/dpdk/day1">dpdk</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/edit/docusaurus自定义渲染内容">edit</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/es/Search UI with Elasticsearch  Elastic docs --- 使用 Elasticsearch 的搜索用户界面 弹性文档">es</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/faq/faq汇总">faq</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/blog/docs/go_web/">rest api</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/language/C语言内存使用血与泪教训">language</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/linux/centos搭建离线仓库">linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/mail/email编程">mail</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/network/C语言网络编程库选择">network</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/openguass/opengauss dcf搭建 - 墨天轮">openguass</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/blog/docs/page/">&lt;center&gt;说明&lt;/center&gt;</a><button aria-label="展开侧边栏分类 &#x27;&lt;center&gt;说明&lt;/center&gt;&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/pgsql/PostgreSQL 时间线解析">pgsql</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/programmer_self_cultivation/linux生成coredump">programmer_self_cultivation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/protocol/fib表">protocol</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/road/左耳朵耗子的话——关于技术的一些思考">road</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/storage/nfs详解">storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/blog/docs/tools/">readme</a><button aria-label="展开侧边栏分类 &#x27;readme&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/video_work/video">video_work</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/vpp/cdu_nxp2160_ptp1588v2实现方案">vpp</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/blog/docs/vue/5种回到顶部的写法从实现到增强 - 小火柴的蓝色理想 - 博客园">vue</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/blog/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">cluster</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ha</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">&lt;center&gt;调整允许的corosync网络波动时间操作步骤&lt;/center&gt;</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1><center>调整允许的corosync网络波动时间操作步骤</center></h1></header>
<table><thead><tr><th>编写人</th><th>编写内容</th><th>编写时间</th></tr></thead><tbody><tr><td>段应寿</td><td>初稿</td><td>2023-06-08</td></tr></tbody></table>
<p>调整允许的corosync网络波动时间仅需修改repmgr.conf配置文件，重启kbha和repmgrd进程，无需停止数据库，也不影响上层业务运行。按如下步骤修改配置并重启服务，经过本次修改重启后，允许的网络波动时间将从20秒增加到50秒。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="停止observer防止修改配置过程中触发跨中心切换">停止observer，防止修改配置过程中触发跨中心切换<a href="#停止observer防止修改配置过程中触发跨中心切换" class="hash-link" aria-label="停止observer，防止修改配置过程中触发跨中心切换的直接链接" title="停止observer，防止修改配置过程中触发跨中心切换的直接链接">​</a></h2>
<ol>
<li>在observer节点查看集群状态是否正常，保证集群状态正常的情况下进行后续操作；</li>
</ol>
<p>在observer节点使用如下命令查看集群状态：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./repmgr cluster show</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/blog/assets/images/cluster_status_in_observer-7e45192b029b574f25c074a0908bb2d4.png" width="1404" height="453" class="img_ev3q"></p>
<p>如上图所示，可以看到生产中心和灾备中心的信息均能查询到，其各节点状态均正常，此时可以进行后续步骤。</p>
<ol start="2">
<li>停止observer；</li>
</ol>
<p>使用如下命令停止observer，防止重启高可用服务时进行跨中心切换。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./ha_ctl.sh observer stop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/blog/assets/images/stop_observer-f896c618244e7bca782e0db6dc1fdfa1.png" width="1062" height="96" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="修改生产中心配置并重启kbha服务和repmgrd服务">修改生产中心配置，并重启kbha服务和repmgrd服务<a href="#修改生产中心配置并重启kbha服务和repmgrd服务" class="hash-link" aria-label="修改生产中心配置，并重启kbha服务和repmgrd服务的直接链接" title="修改生产中心配置，并重启kbha服务和repmgrd服务的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="在第一个节点上执行如下步骤">在第一个节点上执行如下步骤<a href="#在第一个节点上执行如下步骤" class="hash-link" aria-label="在第一个节点上执行如下步骤的直接链接" title="在第一个节点上执行如下步骤的直接链接">​</a></h3>
<ol>
<li>登录机器节点修改配置文件，具体为修改etc/repmgr.conf文件；</li>
</ol>
<p>将repmgr.conf文件中的如下内容：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">reconnect_attempts</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">reconnect_interval</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>替换为</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">reconnect_attempts</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">reconnect_interval</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">vim</span><span class="token plain"> etc/repmgr.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="605" height="58" class="img_ev3q"></p>
<ol start="2">
<li>停止kbha服务</li>
</ol>
<p>使用如下命令停止kbha服务：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./ha_ctl.sh kbha stop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>kbha 服务成功停止后，使用如下命令找到repmgrd的进程id，使用kill结束repmgrd进程。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-ef</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> repmgrd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">kill</span><span class="token plain"> pid</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意：非数据库节点没有repmgrd进程，则不需要结束repmgrd进程，仅重启kbha即可。</p>
<p><img decoding="async" loading="lazy" src="/blog/assets/images/stop_kbha-aac72866ae0891d8f3c047a77faa1d30.png" width="1394" height="235" class="img_ev3q"></p>
<p>repmgrd停止后，使用如下命令确认repmgrd服务已停止。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./repmgr </span><span class="token function" style="color:#d73a49">service</span><span class="token plain"> status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/blog/assets/images/check_repmgrd_not_running-8b3dc11e7fd63164923b77a479817daa.png" width="1116" height="106" class="img_ev3q"></p>
<ol start="3">
<li>重启kbha服务</li>
</ol>
<p>执行如下命令重启kbha。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./ha_ctl.sh kbha start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>repmgrd进程无需手动重启，kbha会自动启动repmgrd进程。</p>
<p>使用如下命令确认repmgrd进程已启动，待repmgrd进程启动后再进行后续步骤。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./repmgr </span><span class="token function" style="color:#d73a49">service</span><span class="token plain"> status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/blog/assets/images/check_repmgrd_running-fa847884a560946e9b3dd90fabd70993.png" width="1113" height="106" class="img_ev3q"></p>
<p>如上图所示repmgrd状态为running，且有有效的pid时，表面repmgrd已正常启动。</p>
<p>kbha和repmgrd重启成功后，查看本中心集群状态，确保集群状态正常，且查询无警告或报错，再进行后续步骤。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./repmgr cluster show</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/blog/assets/images/start_kbha-c480e80f48cde0c5f53d12359cbd0280.png" width="1398" height="340" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="对中心内的其他节点按顺序重复以上步骤">对中心内的其他节点按顺序重复以上步骤<a href="#对中心内的其他节点按顺序重复以上步骤" class="hash-link" aria-label="对中心内的其他节点按顺序重复以上步骤的直接链接" title="对中心内的其他节点按顺序重复以上步骤的直接链接">​</a></h3>
<p>每个节点都需要修改配置并重启kbha服务，且其操作步骤与第一个节点操作步骤相同。</p>
<font color="red">若集群查询有告警或报错，可以在重启后等待几秒，待集群内部状态稳定后再进行后续操作。</font>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="修改灾备中心配置并重启kbha服务和repmgrd服务">修改灾备中心配置，并重启kbha服务和repmgrd服务<a href="#修改灾备中心配置并重启kbha服务和repmgrd服务" class="hash-link" aria-label="修改灾备中心配置，并重启kbha服务和repmgrd服务的直接链接" title="修改灾备中心配置，并重启kbha服务和repmgrd服务的直接链接">​</a></h2>
<p>依次登录灾备中心的各个节点，执行和生产中心相同的步骤修改配置并重启kbha和repmgrd。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="重启observer">重启observer<a href="#重启observer" class="hash-link" aria-label="重启observer的直接链接" title="重启observer的直接链接">​</a></h2>
<p>待生产中心和灾备中心配置均修改完成后，修改observer配置并重启。</p>
<p>编辑repmgr.conf文件，修改如下配置参数：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">tptc_corosync_reconnect_attempts</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">tptc_corosync_reconnect_interval</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>修改为：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">tptc_corosync_reconnect_attempts</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">tptc_corosync_reconnect_interval</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/blog/assets/images/change_observer-a7c28244ca0f664a56a46671c5ee2df6.png" width="1079" height="365" class="img_ev3q"></p>
<p>配置修改完成后，使用如下命令重启observer。</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./ha_ctl.sh observer start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/blog/assets/images/start_observer-1dcc0ce7568c51221aebfb8cd066046f.png" width="1404" height="600" class="img_ev3q"></p>
<p>能正常查询到各中心集群信息，且各节点正常，则本次配置修改完成。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/cluster/ha/调整corosync网络波动时间操作文档.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/docs/cluster/ha/中移动数据库停库问题分析"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">中移动数据库停库问题分析解决</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/docs/cluster/kingbase/kingbase两地三中心日常巡检"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">kingbase两地三中心日常巡检</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#停止observer防止修改配置过程中触发跨中心切换" class="table-of-contents__link toc-highlight">停止observer，防止修改配置过程中触发跨中心切换</a></li><li><a href="#修改生产中心配置并重启kbha服务和repmgrd服务" class="table-of-contents__link toc-highlight">修改生产中心配置，并重启kbha服务和repmgrd服务</a><ul><li><a href="#在第一个节点上执行如下步骤" class="table-of-contents__link toc-highlight">在第一个节点上执行如下步骤</a></li><li><a href="#对中心内的其他节点按顺序重复以上步骤" class="table-of-contents__link toc-highlight">对中心内的其他节点按顺序重复以上步骤</a></li></ul></li><li><a href="#修改灾备中心配置并重启kbha服务和repmgrd服务" class="table-of-contents__link toc-highlight">修改灾备中心配置，并重启kbha服务和repmgrd服务</a></li><li><a href="#重启observer" class="table-of-contents__link toc-highlight">重启observer</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 growdu, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>