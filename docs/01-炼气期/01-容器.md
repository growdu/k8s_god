# å®¹å™¨

## å®‰è£…containerd

```shell
# å®‰è£… containerd
sudo apt update
sudo apt install -y containerd

# é…ç½®é»˜è®¤é…ç½®æ–‡ä»¶
sudo mkdir -p /etc/containerd
containerd config default | sudo tee /etc/containerd/config.toml

# å¯ç”¨ Systemd ç®¡ç†çš„ cgroupï¼ˆå…³é”®ï¼‰
sudo sed -i 's/SystemdCgroup = false/SystemdCgroup = true/' /etc/containerd/config.toml

# é‡å¯æœåŠ¡
sudo systemctl restart containerd
sudo systemctl enable containerd

```

## å®‰è£…docker

åœ¨ Ubuntu 24.04 ä¸Šå®‰è£… Dockerï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ¥ç¨³å®šã€å¿«é€Ÿåœ°å®‰è£…ï¼ˆåŒ…æ‹¬ç”¨ é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿï¼Œé¿å…å¡åœ¨å›½å¤–æºï¼‰ï¼š

âœ… æ­¥éª¤ä¸€ï¼šå¸è½½æ—§ç‰ˆï¼ˆå¦‚æžœæœ‰ï¼‰
```shell
sudo apt remove docker docker-engine docker.io containerd runc

sudo tee /etc/apt/sources.list.d/docker.list > /dev/null <<EOF
deb [arch=amd64 signed-by=/etc/apt/keyrings/docker.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu noble stable
EOF
```

âœ… æ­¥éª¤äºŒï¼šå®‰è£…ä¾èµ–

```shell
sudo apt update
sudo apt install -y ca-certificates curl gnupg lsb-release
```

âœ… æ­¥éª¤ä¸‰ï¼šæ·»åŠ  Docker å®˜æ–¹ GPG å¯†é’¥ï¼ˆå›½å†…é•œåƒï¼‰
```shell
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | \
  sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg
```

âœ… æ­¥éª¤å››ï¼šæ·»åŠ é˜¿é‡Œäº‘ Docker è½¯ä»¶æº

```shell
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] \
  https://mirrors.aliyun.com/docker-ce/linux/ubuntu \
  $(lsb_release -cs) stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```

âœ… æ­¥éª¤äº”ï¼šæ›´æ–°å¹¶å®‰è£… Docker æœ€æ–°ç‰ˆæœ¬
```shell
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

âœ… æ­¥éª¤å…­ï¼šæµ‹è¯•æ˜¯å¦æˆåŠŸ

```shell
sudo docker version
sudo docker run hello-world
```

ðŸ”„ ï¼ˆå¯é€‰ï¼‰æ·»åŠ å½“å‰ç”¨æˆ·åˆ° docker ç”¨æˆ·ç»„ï¼Œé¿å…æ¯æ¬¡ç”¨ sudo

```shell
sudo usermod -aG docker $USER
newgrp docker
```

âœ… é…ç½®å›½å†…é•œåƒåŠ é€Ÿå™¨ï¼ˆæŽ¨èï¼‰
ç¼–è¾‘æ–‡ä»¶ /etc/docker/daemon.jsonï¼ˆå¦‚æžœæ²¡æœ‰å°±æ–°å»ºï¼‰ï¼š

```shell
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json > /dev/null <<EOF
{
  "registry-mirrors": ["https://registry.docker-cn.com", "https://mirror.aliyuncs.com"]
}
EOF
```

ç„¶åŽé‡å¯ Dockerï¼š

```shell
sudo systemctl daemon-reexec
sudo systemctl restart docker
``` 
