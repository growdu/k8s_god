"use strict";(self.webpackChunkk_8_s_god=self.webpackChunkk_8_s_god||[]).push([[2406],{28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>a});var l=s(96540);const t={},r=l.createContext(t);function i(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),l.createElement(r.Provider,{value:n},e.children)}},34873:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"dpdk/linux\u5927\u9875\u5185\u5b58","title":"linux\u5927\u9875\u5185\u5b58","description":"HugePages\u662f\u901a\u8fc7\u4f7f\u7528\u5927\u9875\u5185\u5b58\u6765\u53d6\u4ee3\u4f20\u7edf\u76844kb\u5185\u5b58\u9875\u9762\uff0c\u4f7f\u5f97\u7ba1\u7406\u865a\u62df\u5730\u5740\u6570\u53d8\u5c11\uff0c\u52a0\u5feb\u4e86\u4ece\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\u4ee5\u53ca\u901a\u8fc7\u6452\u5f03\u5185\u5b58\u9875\u9762\u7684\u6362\u5165\u6362\u51fa\u4ee5\u63d0\u9ad8\u5185\u5b58\u7684\u6574\u4f53\u6027\u80fd\u3002","source":"@site/docs/dpdk/linux\u5927\u9875\u5185\u5b58.md","sourceDirName":"dpdk","slug":"/dpdk/linux\u5927\u9875\u5185\u5b58","permalink":"/blog/docs/dpdk/linux\u5927\u9875\u5185\u5b58","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/dpdk/linux\u5927\u9875\u5185\u5b58.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"nxp l3fwd\u6d4b\u8bd5","permalink":"/blog/docs/dpdk/l3fwd"},"next":{"title":"lx2160\u4f7f\u7528dpdk","permalink":"/blog/docs/dpdk/lx2160\u4f7f\u7528dpdk"}}');var t=s(74848),r=s(28453);const i={},a="linux\u5927\u9875\u5185\u5b58",d={},c=[{value:"\u6982\u5ff5",id:"\u6982\u5ff5",level:2},{value:"\u57fa\u672c\u64cd\u4f5c",id:"\u57fa\u672c\u64cd\u4f5c",level:2},{value:"\u5927\u9875\u5185\u5b58free\u4e3a0",id:"\u5927\u9875\u5185\u5b58free\u4e3a0",level:2},{value:"\u547d\u4ee4\u884c\u8bbe\u7f6e\u5927\u9875\u5185\u5b58",id:"\u547d\u4ee4\u884c\u8bbe\u7f6e\u5927\u9875\u5185\u5b58",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"linux\u5927\u9875\u5185\u5b58",children:"linux\u5927\u9875\u5185\u5b58"})}),"\n",(0,t.jsx)(n.p,{children:"HugePages\u662f\u901a\u8fc7\u4f7f\u7528\u5927\u9875\u5185\u5b58\u6765\u53d6\u4ee3\u4f20\u7edf\u76844kb\u5185\u5b58\u9875\u9762\uff0c\u4f7f\u5f97\u7ba1\u7406\u865a\u62df\u5730\u5740\u6570\u53d8\u5c11\uff0c\u52a0\u5feb\u4e86\u4ece\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u6620\u5c04\u4ee5\u53ca\u901a\u8fc7\u6452\u5f03\u5185\u5b58\u9875\u9762\u7684\u6362\u5165\u6362\u51fa\u4ee5\u63d0\u9ad8\u5185\u5b58\u7684\u6574\u4f53\u6027\u80fd\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u6982\u5ff5",children:"\u6982\u5ff5"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Page Table: page table\u4e5f\u5c31\u662f\u4e00\u79cd\u7528\u4e8e\u5185\u5b58\u7ba1\u7406\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u7528\u4e8e\u7269\u7406\u5730\u5740\u5230\u865a\u62df\u4e4b\u95f4\u7684\u6620\u5c04\u3002\u56e0\u6b64\u5bf9\u4e8e\u5185\u5b58\u7684\u8bbf\u95ee\uff0c\u5148\u662f\u8bbf\u95eePage Table\uff0c\u7136\u540e\u6839\u636ePage Table \u4e2d\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u9690\u5f0f\u7684\u8f6c\u79fb\u5230\u7269\u7406\u5730\u5740\u6765\u5b58\u53d6\u6570\u636e\u3002"}),"\n",(0,t.jsx)(n.li,{children:"TLB: Translation Lookaside Buffer (TLB) \uff0cCPU\u4e2d\u7684\u4e00\u5757\u56fa\u5b9a\u5927\u5c0f\u7684cache\uff0c\u5305\u542b\u4e86\u90e8\u5206page table\u7684\u6620\u5c04\u5173\u7cfb\uff0c\u7528\u4e8e\u5feb\u901f\u5b9e\u73b0\u865a\u62df\u5730\u5740\u5230\u7269\u7406\u5730\u5740\u7684\u8f6c\u6362\u3002"}),"\n",(0,t.jsx)(n.li,{children:"hugetlb: hugetlb \u662fTLB\u4e2d\u6307\u5411HugePage\u7684\u4e00\u4e2aentry(\u901a\u5e38\u5927\u4e8e4k\u6216\u9884\u5b9a\u4e49\u9875\u9762\u5927\u5c0f)\u3002 HugePage \u901a\u8fc7hugetlb entries\u6765\u5b9e\u73b0\uff0c\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3aHugePage \u662fhugetlb page entry\u7684\u4e00\u4e2a\u53e5\u67c4"}),"\n",(0,t.jsx)(n.li,{children:"hugetlbfs: \u4e00\u4e2a\u7c7b\u4f3c\u4e8etmpfs\u7684\u65b0\u7684in-memory filesystem\uff0c\u57282.6\u5185\u6838\u88ab\u63d0\u51fa"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u57fa\u672c\u64cd\u4f5c",children:"\u57fa\u672c\u64cd\u4f5c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"[root@develop ~]# grep Huge /proc/meminfo    \nAnonHugePages:     14336 kB\nHugePages_Total:       0\nHugePages_Free:        0\nHugePages_Rsvd:        0\nHugePages_Surp:        0\nHugepagesize:       2048 kB\n~# ls /sys/kernel/mm/hugepages/\nhugepages-1048576kB  hugepages-2048kB  hugepages-32768kB  hugepages-64kB\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u5927\u9875\u5185\u5b58free\u4e3a0",children:"\u5927\u9875\u5185\u5b58free\u4e3a0"}),"\n",(0,t.jsx)(n.p,{children:"\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u91cd\u65b0\u6302\u8f7d\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"# Build DPDK target.\ncd dpdk_folder\n\n# Get the hugepage size.\nawk '/Hugepagesize/ {print $2}' /proc/meminfo\n\n# Get the total huge page numbers.\nawk '/HugePages_Total/ {print $2} ' /proc/meminfo\n\n# Unmount the hugepages.\numount `awk '/hugetlbfs/ {print $2}' /proc/mounts`\n\n# Create the hugepage mount folder.\nmkdir -p /mnt/huge\n\n# Mount to the specific folder.\nmount -t hugetlbfs nodev /mnt/huge\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u547d\u4ee4\u884c\u8bbe\u7f6e\u5927\u9875\u5185\u5b58",children:"\u547d\u4ee4\u884c\u8bbe\u7f6e\u5927\u9875\u5185\u5b58"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"$ sysctl -w vm.nr_hugepages=512\n$ sysctl -p \n"})}),"\n",(0,t.jsx)(n.h1,{id:"reference",children:"reference"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://blog.csdn.net/zhang123456456/article/details/77853345",children:"https://blog.csdn.net/zhang123456456/article/details/77853345"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://blog.csdn.net/weixin_35664258/article/details/83348133",children:"https://blog.csdn.net/weixin_35664258/article/details/83348133"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://www.cnblogs.com/zfox2017/p/6794617.html",children:"https://www.cnblogs.com/zfox2017/p/6794617.html"})}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);