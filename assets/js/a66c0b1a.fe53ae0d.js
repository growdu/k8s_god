"use strict";(self.webpackChunkk_8_s_god=self.webpackChunkk_8_s_god||[]).push([[191],{28453:(n,e,d)=>{d.d(e,{R:()=>c,x:()=>r});var i=d(96540);const s={},l=i.createContext(s);function c(n){const e=i.useContext(l);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:c(n.components),i.createElement(l.Provider,{value:e},n.children)}},43517:(n,e,d)=>{d.d(e,{A:()=>i});const i=d.p+"assets/images/dpaa2_software-093a347fee9b8a614b58fd7f05bb7dde.png"},71603:(n,e,d)=>{d.d(e,{A:()=>i});const i=d.p+"assets/images/dpaa2_object-ac934508a0d8c0ef9e20da9be3817b89.png"},82896:(n,e,d)=>{d.r(e),d.d(e,{assets:()=>p,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"dpdk/lx2160\u4f7f\u7528dpdk","title":"lx2160\u4f7f\u7528dpdk","description":"\u786c\u4ef6\u6982\u8981","source":"@site/docs/dpdk/lx2160\u4f7f\u7528dpdk.md","sourceDirName":"dpdk","slug":"/dpdk/lx2160\u4f7f\u7528dpdk","permalink":"/blog/docs/dpdk/lx2160\u4f7f\u7528dpdk","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/dpdk/lx2160\u4f7f\u7528dpdk.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"linux\u5927\u9875\u5185\u5b58","permalink":"/blog/docs/dpdk/linux\u5927\u9875\u5185\u5b58"},"next":{"title":"nxp\u6d4b\u8bd5\u62a5\u544a","permalink":"/blog/docs/dpdk/nxp\u6d4b\u8bd5\u62a5\u544a"}}');var s=d(74848),l=d(28453);const c={},r="lx2160\u4f7f\u7528dpdk",p={},t=[{value:"\u786c\u4ef6\u6982\u8981",id:"\u786c\u4ef6\u6982\u8981",level:2},{value:"\u67e5\u770b\u7f51\u5361",id:"\u67e5\u770b\u7f51\u5361",level:2},{value:"dpaa2",id:"dpaa2",level:2},{value:"DPRC",id:"dprc",level:3},{value:"\u521b\u5efadprcs",id:"\u521b\u5efadprcs",level:4},{value:"restool",id:"restool",level:3},{value:"\u5176\u4ed6\u547d\u4ee4",id:"\u5176\u4ed6\u547d\u4ee4",level:3}];function a(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"lx2160\u4f7f\u7528dpdk",children:"lx2160\u4f7f\u7528dpdk"})}),"\n",(0,s.jsx)(e.h2,{id:"\u786c\u4ef6\u6982\u8981",children:"\u786c\u4ef6\u6982\u8981"}),"\n",(0,s.jsx)(e.p,{children:"\u5e95\u5c42\u9a71\u52a8\u540c\u4e8b\u8d1f\u8d23\u5728\u64cd\u4f5c\u7cfb\u7edf\u542f\u52a8\u7684\u65f6\u5019\u540c\u65f6\u542f\u52a8\u7f51\u5361\uff0c\u5176\u4e2ddpni.3\u4e3a\u5bf9\u5916\u768410G\u7f51\u5361\uff0c\u662f\u6211\u4eec\u9700\u8981\u4f7f\u7528\u7684\u7f51\u5361\u3002"}),"\n",(0,s.jsx)(e.p,{children:"dpni.3\u5bf9\u5e94eth3\uff0c\u4e0edpmac.4\u76f8\u8fde\u3002\u5bf9\u4e8eeth3\uff0c\u53ef\u4ee5\u4f7f\u7528\u6807\u51c6\u7684linux\u7f51\u7edc\u5de5\u5177\uff0c\u53ef\u4f7f\u7528ethtool\u3001ifconfig\u5bf9\u5176\u64cd\u4f5c\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"root@hx-A-Tiny:/mnt/emmc2# ls-listni\ndprc.1/dpni.4 (interface: eth4, end point: dpmac.3)\ndprc.1/dpni.3 (interface: eth3, end point: dpmac.4)\ndprc.1/dpni.2 (interface: eth2, end point: dpmac.13)\ndprc.1/dpni.1 (interface: eth0)\ndprc.1/dpni.0 (interface: eth1, end point: dpmac.14)\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u67e5\u770b\u7f51\u5361",children:"\u67e5\u770b\u7f51\u5361"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u66f4\u6362dpdk\u524d"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"root@hx-A-Tiny:/mnt/emmc2# ls-listni\ndprc.1/dpni.4 (interface: eth4, end point: dpmac.3)\ndprc.1/dpni.3 (interface: eth3, end point: dpmac.4)\ndprc.1/dpni.2 (interface: eth2, end point: dpmac.13)\ndprc.1/dpni.1 (interface: eth0)\ndprc.1/dpni.0 (interface: eth1, end point: dpmac.14)\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u66f4\u6362dpdk\u540e"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"root@hx-A-Tiny:~# ls-listni\ndprc.1/dpni.4 (interface: eth4, end point: dpmac.3)\ndprc.1/dpni.3 (interface: eth3)\ndprc.1/dpni.2 (interface: eth2, end point: dpmac.13)\ndprc.1/dpni.1 (interface: eth0)\ndprc.1/dpni.0 (interface: eth1, end point: dpmac.14)\ndprc.1/dprc.2/dpni.5 (end point: dpmac.4)\nroot@hx-A-Tiny:~#\n"})}),"\n",(0,s.jsx)(e.h2,{id:"dpaa2",children:"dpaa2"}),"\n",(0,s.jsx)(e.p,{children:"\u4e13\u6709\u540d\u8bcd\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"DPRC (Datapath Resource Container)"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"DPNI (Datapath Network Interface)"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"DPSW(Datapath Switch)"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"DPMAC (Datapath MAC)"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"DPIO (Datapath I/O)"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"dpaa\u8f6f\u4ef6\u7ed3\u6784\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:d(43517).A+"",width:"1438",height:"567"})}),"\n",(0,s.jsx)(e.p,{children:"dpaa2\u5bf9\u8c61\u5173\u7cfb\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:d(71603).A+"",width:"1236",height:"853"})}),"\n",(0,s.jsxs)(e.p,{children:["dpaa2\u7684\u5bf9\u8c61\u53ef\u4ee5\u4f7f\u7528",(0,s.jsx)(e.code,{children:"restool"}),"\u547d\u4ee4\u6765\u8fdb\u884c\u67e5\u770b\u548c\u7ba1\u7406\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"\u5bf9\u4e8e\u7f51\u5361\u6765\u8bf4\uff0c\u4e0elinux\u76f8\u540c\uff0c\u540c\u6837\u652f\u6301\u5982\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ifconfig"}),"\n",(0,s.jsx)(e.li,{children:"ip"}),"\n",(0,s.jsx)(e.li,{children:"ethtool"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"dpaa2\u652f\u6301\u7684\u5176\u4ed6\u547d\u4ee4\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"restool"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"# \u67e5\u770bdprc\u8d44\u6e90\nrestool dprc info dprc.2\n# \u67e5\u770bdprc\u4e0b\u7684dpio\\dpbp\u7b49\nrestool dprc show dprc.2\n# \u67e5\u770bdpni\u8d44\u6e90\nrestool dpni info dpni.1\n#\u67e5\u770bdpmac\u4fe1\u606f\nrestool dpmac info dpmac.4\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"dpaa2\u901a\u8fc7\u5982\u4e0b\u4e09\u79cd\u65b9\u5f0f\u5c06\u786c\u4ef6\u8d44\u6e90\u5206\u914d\u7ed9container\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"the datapath layout file"}),"\n",(0,s.jsx)(e.li,{children:"restool"}),"\n",(0,s.jsx)(e.li,{children:"Management Complex commands"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"dprc",children:"DPRC"}),"\n",(0,s.jsx)(e.p,{children:"dprc\u662f\u5982\u4e0b\u8f6f\u4ef6\u8fd0\u884c\u7684\u57fa\u7840\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"linux\u5185\u6838"}),"\n",(0,s.jsx)(e.li,{children:"kvm"}),"\n",(0,s.jsx)(e.li,{children:"dpdk\u5e94\u7528"}),"\n",(0,s.jsx)(e.li,{children:"aiop\u5e94\u7528"}),"\n"]}),"\n",(0,s.jsx)(e.h4,{id:"\u521b\u5efadprcs",children:"\u521b\u5efadprcs"}),"\n",(0,s.jsx)(e.p,{children:"\u6709\u4e24\u79cd\u65b9\u5f0f\u521b\u5efadprcs\uff1a"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u9759\u6001\u521b\u5efa"}),"\n",(0,s.jsx)(e.p,{children:"DPL file\uff08RCW\u3001DPC\u3001DPL\uff09"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"reset configuration word (RCW)"}),"\n",(0,s.jsx)(e.li,{children:"the data path configuration (DPC)"}),"\n",(0,s.jsx)(e.li,{children:"data path layout (DPL)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u52a8\u6001\u521b\u5efa"}),"\n",(0,s.jsx)(e.p,{children:"restool\u547d\u4ee4\u521b\u5efa"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"#\u5217\u51fadprc\nrestool dprc list\n#\u5217\u51fa\u5728dprc.1\u4e0b\u7684\u6240\u6709\u5bf9\u8c61\nrestool dprc show dprc.1\n#\u67e5\u770bdpni.0\u7684\u76f8\u5173\u4fe1\u606f\nrestool dpni info dpni.0\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"# \u521b\u5efadpbp\nrestool dpbp create\n#\u5c06\u65b0\u521b\u5efa\u7684dpbp.5\u63d2\u5165\nrestool dprc assign dprc.1 --oect=dpbp.5 --plugged=1\n#\u914d\u7f6eip\nifconfig eth1 192.168.1.2\n#\u4fee\u6539mac\nifconfig eth1 hw ether 02:00:C0:01:02:0a\nip link set dev eth1 address 02:00:C0:01:02:0b\n"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u52a8\u6001\u5220\u9664"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"#unbind dpni.5\necho dpni.5 > /sys/bus/fsl-mc/drivers/vfio-fsl-mc/unbind\n#destroy\nrestool dpni destroy dpni.5\n#unbingd dprc.2\necho dprc.2 > /sys/bus/fsl-mc/drivers/vfio-fsl-mc/unbind\n#destroy\nrestool dprc destroy dprc.2\n#unbind\necho dpmac.4 > /sys/bus/fsl-mc/drivers/dpaa2_mac/unbind\n#destroy\nrestool dpmac destroy dpmac.4\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"restool",children:"restool"}),"\n",(0,s.jsx)(e.h3,{id:"\u5176\u4ed6\u547d\u4ee4",children:"\u5176\u4ed6\u547d\u4ee4"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"ls-addni"})}),"\n",(0,s.jsx)(e.p,{children:"\u7528\u6765\u521b\u5efaDPNI\u3002"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"ls-listni"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:"ls-listmac"})}),"\n"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}}}]);