"use strict";(self.webpackChunkk_8_s_god=self.webpackChunkk_8_s_god||[]).push([[5770],{28453:(c,n,e)=>{e.d(n,{R:()=>i,x:()=>d});var o=e(96540);const s={},r=o.createContext(s);function i(c){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof c?c(n):{...n,...c}}),[n,c])}function d(c){let n;return n=c.disableParentContext?"function"==typeof c.components?c.components(s):c.components||s:i(c.components),o.createElement(r.Provider,{value:n},c.children)}},91885:(c,n,e)=>{e.r(n),e.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>y,frontMatter:()=>i,metadata:()=>o,toc:()=>t});const o=JSON.parse('{"id":"cluster/corosync/corosync-qdevice\u8be6\u89e3","title":"corosync-qdevice\u8be6\u89e3","description":"corosync-qdevice\u662fcorosync\u96c6\u7fa4\u5de5\u5177\u7684\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u7528\u4e8e\u63d0\u4f9b\u7b2c\u4e09\u65b9\u4ef2\u88c1\u670d\u52a1\u3002corosync-qdevice\u9700\u4e0ecorosync-qnetd\u548ccorosync\u4e00\u8d77\u4f7f\u7528\uff0c\u65e0\u6cd5\u5355\u72ec\u8fd0\u884c\u3002","source":"@site/docs/cluster/corosync/corosync-qdevice\u8be6\u89e3.md","sourceDirName":"cluster/corosync","slug":"/cluster/corosync/corosync-qdevice\u8be6\u89e3","permalink":"/blog/docs/cluster/corosync/corosync-qdevice\u8be6\u89e3","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/cluster/corosync/corosync-qdevice\u8be6\u89e3.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"corosync-qdevice\u6e90\u7801\u9605\u8bfb","permalink":"/blog/docs/cluster/corosync/corosync-qdevice\u6e90\u7801\u9605\u8bfb"},"next":{"title":"corosync-qnetd\u6295\u7968\u673a\u5236","permalink":"/blog/docs/cluster/corosync/corosync-qnetd\u6295\u7968\u673a\u5236"}}');var s=e(74848),r=e(28453);const i={},d="corosync-qdevice\u8be6\u89e3",l={},t=[{value:"corosync-qdevice\u67b6\u6784",id:"corosync-qdevice\u67b6\u6784",level:2},{value:"corosync\u8282\u70b9",id:"corosync\u8282\u70b9",level:3},{value:"corosync-qnetd\u8282\u70b9",id:"corosync-qnetd\u8282\u70b9",level:3},{value:"\u6574\u4f53\u8fd0\u884c\u72b6\u6001",id:"\u6574\u4f53\u8fd0\u884c\u72b6\u6001",level:3},{value:"corosync-qdevice\u914d\u7f6e",id:"corosync-qdevice\u914d\u7f6e",level:2},{value:"corosync-qnetd\u914d\u7f6e",id:"corosync-qnetd\u914d\u7f6e",level:2}];function h(c){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...c.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"corosync-qdevice\u8be6\u89e3",children:"corosync-qdevice\u8be6\u89e3"})}),"\n",(0,s.jsx)(n.p,{children:"corosync-qdevice\u662fcorosync\u96c6\u7fa4\u5de5\u5177\u7684\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u7528\u4e8e\u63d0\u4f9b\u7b2c\u4e09\u65b9\u4ef2\u88c1\u670d\u52a1\u3002corosync-qdevice\u9700\u4e0ecorosync-qnetd\u548ccorosync\u4e00\u8d77\u4f7f\u7528\uff0c\u65e0\u6cd5\u5355\u72ec\u8fd0\u884c\u3002"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u5141\u8bb8corosync\u5728\u5076\u6570\u8282\u70b9\u5206\u88c2\u4e3a\u4e24\u4e2a\u76f8\u4f3c\u7684\u90e8\u5206\u540e\u4ef2\u88c1\u9009\u62e9\u51fa\u4e00\u65b9\u7ee7\u7eed\u63d0\u4f9b\u670d\u52a1"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u5141\u8bb8corosync\u5728\u8fd0\u884c\u5230\u5269\u4e0b\u6700\u540e\u4e00\u4e2a\u8282\u70b9\u4ecd\u80fd\u591f\u63d0\u4f9b\u670d\u52a1"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"corosync-qdevice\u67b6\u6784",children:"corosync-qdevice\u67b6\u6784"}),"\n",(0,s.jsx)(n.h3,{id:"corosync\u8282\u70b9",children:"corosync\u8282\u70b9"}),"\n",(0,s.jsx)(n.p,{children:"\u90e8\u7f72\u8fd0\u884ccorosync\u548ccorosync-qdevice\u670d\u52a1\u7684\u8282\u70b9\u3002\u5c5e\u4e8e\u96c6\u7fa4\u8282\u70b9\uff0c\u63d0\u4f9b\u96c6\u7fa4\u901a\u4fe1\u670d\u52a1\uff0c\u53c2\u4e0e\u96c6\u7fa4\u7684\u5404\u9879\u51b3\u7b56\u4efb\u52a1\u3002"}),"\n",(0,s.jsx)(n.p,{children:"corosync\u9700\u5148\u8fd0\u884c\uff0c\u518d\u8fd0\u884ccorosync-qdevice\uff0ccorosync\u548ccorosync-qdevice\u5171\u7528\u4e00\u4efd\u914d\u7f6e\u3002corosync\u8fd0\u884c\u7684\u65f6\u5019\u4f1a\u5c06\u6307\u5b9a\u8def\u5f84\u7684corosync.conf\u7684\u914d\u7f6e\u8bfb\u53d6\u5230cmap\u4e2d\uff0ccorosync-qdevice\u8fd0\u884c\u65f6\u901a\u8fc7\u8fde\u63a5corosync\u7684cmap\u6765\u83b7\u53d6qdevice\u76f8\u5173\u7684\u914d\u7f6e\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"corosync-qnetd\u8282\u70b9",children:"corosync-qnetd\u8282\u70b9"}),"\n",(0,s.jsx)(n.p,{children:"\u90e8\u7f72\u8fd0\u884ccorosync-qnetd\u670d\u52a1\u7684\u8282\u70b9\u3002\u4e0d\u5c5e\u4e8e\u96c6\u7fa4\u8282\u70b9\uff0c\u53ea\u8d1f\u8d23\u5728\u96c6\u7fa4\u4e2d\u6709\u8282\u70b9\u6302\u6389\u65f6\u53c2\u4e0e\u6295\u7968\uff0c\u8f85\u52a9\u9009\u62e9quorate\u4e00\u65b9\u7684\u96c6\u7fa4\u3002"}),"\n",(0,s.jsx)(n.p,{children:"corosync-qnetd\u9700\u8981\u5728corosync\u548ccorosync-qdevice\u65f6\u8fd0\u884c\u4e4b\u524d\u90e8\u7f72\u597d\uff0c\u4e00\u822c\u9009\u62e9\u4e0ecorosync\u8282\u70b9\u5728\u4e0d\u540c\u7684\u7269\u7406\u673a\u5668\u4e0a\u3002\u4e3a\u4e86\u9ad8\u53ef\u7528\u6027\uff0c\u53ef\u9009\u62e9\u4e24\u53f0\u673a\u5668\u90e8\u7f72\u4e24\u4e2acorosync-qnetd\u7684\u670d\u52a1\u3002"}),"\n",(0,s.jsx)(n.p,{children:"corosync-qnetd\u53ef\u4ee5\u7ed9\u591a\u4e2a\u96c6\u7fa4\u63d0\u4f9b\u6295\u7968\u670d\u52a1\uff0c\u6839\u636e\u96c6\u7fa4\u7684\u540d\u5b57\u8fdb\u884c\u533a\u5206\u4e0d\u540c\u7684\u96c6\u7fa4\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u6574\u4f53\u8fd0\u884c\u72b6\u6001",children:"\u6574\u4f53\u8fd0\u884c\u72b6\u6001"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"corosync-qnetd\u4f5c\u4e3acorosync-qdevice\u7684\u670d\u52a1\u7aef\u8fd0\u884c"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"corosync-qdevice\u548ccorosync\u4e00\u8d77\u8fd0\u884c\uff0ccorosync-device\u4f5c\u4e3a\u5ba2\u6237\u7aef\u4f1a\u5728\u542f\u52a8\u65f6\u8fde\u63a5corosync-qnetd"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u5f53\u6709\u96c6\u7fa4\u8282\u70b9\u53d8\u52a8\u65f6\uff0ccorosync-qdevice\u4f1a\u548ccorosync-qnetd\u901a\u4fe1\uff0c\u5e76\u6839\u636e\u8bbe\u5b9a\u7684\u6295\u7968\u89c4\u5219\u53c2\u4e0e\u6295\u7968"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"corosync-qdevice\u914d\u7f6e",children:"corosync-qdevice\u914d\u7f6e"}),"\n",(0,s.jsx)(n.p,{children:"corosyn-qdevice\u7684\u914d\u7f6e\u5728corosync.conf\u7684quorum\u6a21\u5757\u4e2d\uff0c\u901a\u8fc7\u914d\u7f6equorum.device\u76f8\u5173\u9879\u6765\u914d\u7f6e\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'quorum {\n         provider: corosync_votequorum\n         device {\n           votes: 1\n           model: net\n           net {\n             tls: on\n             host: qnetd.example.org\n             algorithm: ffsplit\n           }\n           heuristics {\n             mode: sync\n             exec_ping: /bin/ping -q -c 1 "www.example.org"\n             exec_test_txt_exists: /usr/bin/test -f /tmp/test.txt\n           }\n       }\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"votes"}),"\n",(0,s.jsx)(n.p,{children:"qnetd\u7684\u7968\u6570\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"host"}),"\n",(0,s.jsx)(n.p,{children:"qnetd\u8fd0\u884c\u7684ip\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"port"}),"\n",(0,s.jsx)(n.p,{children:"qnetd\u8fd0\u884c\u7684\u7aef\u53e3\u3002"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"algorithm"}),"\n",(0,s.jsx)(n.p,{children:"\u9009\u62e9\u7684\u542f\u53d1\u5f0f\u7b97\u6cd5\uff0c\u53ef\u9009ffsplit\u548clsm\u3002"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"ffsplit \u4e00\u822c\u7528\u5076\u6570\u8282\u70b9\u4f1a\u5206\u5272\u4e3a\u76f8\u4f3c\u7684\u4e24\u90e8\u5206\u7684\u60c5\u51b5"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"lsm \u4e00\u822c\u7528\u4e8e\u53ea\u5269\u4e0b\u4e00\u4e2a\u8282\u70b9\u4e5f\u80fd\u63d0\u4f9b\u670d\u52a1"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"heuristic"}),"\n",(0,s.jsx)(n.p,{children:"\u542f\u53d1\u5f0f\u7b97\u6cd5"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"corosync-qnetd\u914d\u7f6e",children:"corosync-qnetd\u914d\u7f6e"}),"\n",(0,s.jsx)(n.p,{children:"corosync-qnetd\u4e0d\u9700\u8981\u914d\u7f6e\u6587\u4ef6\uff0c\u76f4\u63a5\u4ee5\u547d\u4ee4\u884c\u53c2\u6570\u6307\u5b9a\u76f8\u5173\u914d\u7f6e\u8fd0\u884c\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# -l \u6307\u5b9a\u76d1\u542c\u5730\u5740\uff0c\u9ed8\u8ba4\u5168\u5730\u5740\n# -p \u6307\u5b9a\u76d1\u542c\u7aef\u53e3\uff0c\u9ed8\u8ba45403\n# -s \u662f\u5426\u5f00\u542ftls\uff0c\u9ed8\u8ba4\u5f00\u542f\n# -f \u540e\u53f0\u8fd0\u884c\ncorosync-qnetd -l host -p port -s on/off -f\n"})})]})}function y(c={}){const{wrapper:n}={...(0,r.R)(),...c.components};return n?(0,s.jsx)(n,{...c,children:(0,s.jsx)(h,{...c})}):h(c)}}}]);