"use strict";(self.webpackChunkk_8_s_god=self.webpackChunkk_8_s_god||[]).push([[8002],{1540:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"\u7b51\u57fa\u671f/k8s\u96c6\u7fa4\u642d\u5efa","title":"k8s\u96c6\u7fa4\u642d\u5efa","description":"\u4f7f\u7528\u865a\u62df\u673a\u914d\u7f6e\u597d\u5355\u8282\u70b9k8s\u73af\u5883\u540e\uff0c\u5c06\u5f53\u524d\u73af\u5883\u91cd\u7f6e\uff0c\u7136\u540e\u590d\u5236\u865a\u62df\u673a\uff0c\u521b\u5efa3\u4e2a\u8282\u70b9\u7684\u96c6\u7fa4\u3002","source":"@site/docs/02-\u7b51\u57fa\u671f/03-k8s\u96c6\u7fa4\u642d\u5efa.md","sourceDirName":"02-\u7b51\u57fa\u671f","slug":"/\u7b51\u57fa\u671f/k8s\u96c6\u7fa4\u642d\u5efa","permalink":"/docs/\u7b51\u57fa\u671f/k8s\u96c6\u7fa4\u642d\u5efa","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/02-\u7b51\u57fa\u671f/03-k8s\u96c6\u7fa4\u642d\u5efa.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u5b89\u88c5k8s","permalink":"/docs/\u7b51\u57fa\u671f/\u5b89\u88c5k8s"},"next":{"title":"k8s\u57fa\u672c\u64cd\u4f5c","permalink":"/docs/\u7b51\u57fa\u671f/k8s\u57fa\u672c\u64cd\u4f5c"}}');var t=s(4848),o=s(8453);const a={},d="k8s\u96c6\u7fa4\u642d\u5efa",c={},l=[{value:"\u914d\u7f6e\u5176\u4ed6\u8282\u70b9",id:"\u914d\u7f6e\u5176\u4ed6\u8282\u70b9",level:2},{value:"\u521d\u59cb\u5316node1\u8282\u70b9",id:"\u521d\u59cb\u5316node1\u8282\u70b9",level:2},{value:"\u914d\u7f6enode2",id:"\u914d\u7f6enode2",level:2},{value:"\u914d\u7f6enode3",id:"\u914d\u7f6enode3",level:2},{value:"\u90e8\u7f72kubernetes-dashboard",id:"\u90e8\u7f72kubernetes-dashboard",level:2}];function i(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"k8s\u96c6\u7fa4\u642d\u5efa",children:"k8s\u96c6\u7fa4\u642d\u5efa"})}),"\n",(0,t.jsx)(n.p,{children:"\u4f7f\u7528\u865a\u62df\u673a\u914d\u7f6e\u597d\u5355\u8282\u70b9k8s\u73af\u5883\u540e\uff0c\u5c06\u5f53\u524d\u73af\u5883\u91cd\u7f6e\uff0c\u7136\u540e\u590d\u5236\u865a\u62df\u673a\uff0c\u521b\u5efa3\u4e2a\u8282\u70b9\u7684\u96c6\u7fa4\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u6e05\u9664\u5df2\u90e8\u7f72\u7684\u96c6\u7fa4\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl delete --all pods --all-namespaces\nkubectl delete --all services --all-namespaces\nkubectl delete --all deployments --all-namespaces\nkubectl delete --all replicaSets --all-namespaces\nkubectl delete --all statefulSets --all-namespaces\nkubectl delete --all daemonSets --all-namespaces\nkubectl delete --all configmaps --all-namespaces\nkubectl delete --all secrets --all-namespaces\nkubectl delete --all ingress --all-namespaces\n\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u91cd\u7f6e Kubernetes \u96c6\u7fa4"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo kubeadm reset --cri-socket=unix:///var/run/cri-dockerd.sock\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u914d\u7f6e\u5176\u4ed6\u8282\u70b9",children:"\u914d\u7f6e\u5176\u4ed6\u8282\u70b9"}),"\n",(0,t.jsx)(n.p,{children:"\u514b\u9686\u51fa\u6765\u4e09\u53f0\u673a\u5668\u540e\uff0c\u5206\u522b\u8bbe\u7f6e\u673a\u5668\u7684hostname\u4e3anode1\u3001node2\u3001node3."}),"\n",(0,t.jsx)(n.p,{children:"\u6bcf\u4e2a\u8282\u70b9\u7684/etc/hosts\u8bbe\u7f6e\u6210\u5982\u4e0b\u5185\u5bb9\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"192.168.3.96 node1\n192.168.3.95 node2\n192.168.3.94 node3\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u786e\u8ba4\u4e00\u4e0b\u662f\u5426\u80fdping\u901a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"root@node1:/home/dys# ping node2\nPING node2 (192.168.3.95) 56(84) bytes of data.\n64 bytes from node2 (192.168.3.95): icmp_seq=1 ttl=64 time=0.359 ms\n64 bytes from node2 (192.168.3.95): icmp_seq=2 ttl=64 time=0.372 ms\n64 bytes from node2 (192.168.3.95): icmp_seq=3 ttl=64 time=0.333 ms\n^C\n--- node2 ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2029ms\nrtt min/avg/max/mdev = 0.333/0.354/0.372/0.016 ms\nroot@node1:/home/dys# ping node\nping: node: Temporary failure in name resolution\nroot@node1:/home/dys# ping node3\nPING node3 (192.168.3.94) 56(84) bytes of data.\n64 bytes from node3 (192.168.3.94): icmp_seq=1 ttl=64 time=0.636 ms\n64 bytes from node3 (192.168.3.94): icmp_seq=2 ttl=64 time=0.376 ms\n64 bytes from node3 (192.168.3.94): icmp_seq=3 ttl=64 time=0.416 ms\n^C\n--- node3 ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2035ms\nrtt min/avg/max/mdev = 0.376/0.476/0.636/0.114 ms\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u521d\u59cb\u5316node1\u8282\u70b9",children:"\u521d\u59cb\u5316node1\u8282\u70b9"}),"\n",(0,t.jsx)(n.p,{children:"\u5728node1\u8282\u70b9\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u521d\u59cb\u5316k8s\u96c6\u7fa4"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubeadm init --apiserver-advertise-address=192.168.3.96 --pod-network-cidr=10.244.0.0/16 --image-repository=registry.aliyuncs.com/google_containers  --ignore-preflight-errors=Swap --cri-socket=unix:///var/run/cri-dockerd.sock -v=5\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6267\u884c\u6210\u529f\u540e\u4f1a\u8f93\u51fa\u5982\u4e0b\u5185\u5bb9\uff0c\u9700\u8981\u8bb0\u4f4f\u8be5\u547d\u4ee4\uff0c\u540e\u7eed\u8fd8\u8981\u4f7f\u7528\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'Your Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nAlternatively, if you are the root user, you can run:\n\n  export KUBECONFIG=/etc/kubernetes/admin.conf\n\nYou should now deploy a pod network to the cluster.\nRun "kubectl apply -f [podnetwork].yaml" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.3.96:6443 --token yb65a1.p045bn1algxpvl5h \\\n        --discovery-token-ca-cert-hash sha256:fc7bc23017475064f73df1f2d91b30a80e4a405e77519a53524109d211eb7132\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u521d\u59cb\u5316\u5b8c\u6210\u540e\uff0c\u914d\u7f6e kubectl \u4ee5\u4fbf\u672c\u5730\u4f7f\u7528 Kubernetes API\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u7136\u540e\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u4e00\u4e0b\u5f53\u524d\u8282\u70b9\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"root@node1:/home/dys# kubectl get nodes\nNAME    STATUS   ROLES           AGE     VERSION\nnode1   Ready    control-plane   3m48s   v1.28.2\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7684\u8d44\u6e90\u60c5\u51b5\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"root@node1:/home/dys# kubectl get all --all-namespaces\nNAMESPACE     NAME                                READY   STATUS              RESTARTS   AGE\nkube-system   pod/coredns-66f779496c-gkdp7        0/1     ContainerCreating   0          5m50s\nkube-system   pod/coredns-66f779496c-rjtgp        0/1     ContainerCreating   0          5m50s\nkube-system   pod/etcd-node1                      1/1     Running             0          6m4s\nkube-system   pod/kube-apiserver-node1            1/1     Running             0          6m4s\nkube-system   pod/kube-controller-manager-node1   1/1     Running             0          6m4s\nkube-system   pod/kube-proxy-pvw92                1/1     Running             0          5m51s\nkube-system   pod/kube-scheduler-node1            1/1     Running             0          6m4s\n\nNAMESPACE     NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)                  AGE\ndefault       service/kubernetes   ClusterIP   10.96.0.1    <none>        443/TCP                  6m7s\nkube-system   service/kube-dns     ClusterIP   10.96.0.10   <none>        53/UDP,53/TCP,9153/TCP   6m5s\n\nNAMESPACE     NAME                        DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE\nkube-system   daemonset.apps/kube-proxy   1         1         1       1            1           kubernetes.io/os=linux   6m5s\n\nNAMESPACE     NAME                      READY   UP-TO-DATE   AVAILABLE   AGE\nkube-system   deployment.apps/coredns   0/2     2            0           6m5s\n\nNAMESPACE     NAME                                 DESIRED   CURRENT   READY   AGE\nkube-system   replicaset.apps/coredns-66f779496c   2         2         0       5m51s\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u786e\u8ba4\u4e00\u4e0b\u662f\u5426\u5b89\u88c5\u4e86\u7f51\u7edc\u63d2\u4ef6\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"root@node1:/home/dys# kubectl get pods -n kube-system\nNAME                            READY   STATUS              RESTARTS   AGE\ncoredns-66f779496c-gkdp7        0/1     ContainerCreating   0          6m56s\ncoredns-66f779496c-rjtgp        0/1     ContainerCreating   0          6m56s\netcd-node1                      1/1     Running             0          7m10s\nkube-apiserver-node1            1/1     Running             0          7m10s\nkube-controller-manager-node1   1/1     Running             0          7m10s\nkube-proxy-pvw92                1/1     Running             0          6m57s\nkube-scheduler-node1            1/1     Running             0          7m10s\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6ca1\u6709\u5b89\u88c5\u7684\u8bdd\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u8fdb\u884c\u5b89\u88c5\uff0c\u5b89\u88c5\u5b8c\u6210\u540e\u518d\u68c0\u67e5\u4e00\u4e0b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"root@node1:/home/dys# kubectl get pods -n kube-system\nNAME                            READY   STATUS    RESTARTS   AGE\ncoredns-66f779496c-gkdp7        1/1     Running   0          11m\ncoredns-66f779496c-rjtgp        1/1     Running   0          11m\netcd-node1                      1/1     Running   0          11m\nkube-apiserver-node1            1/1     Running   0          11m\nkube-controller-manager-node1   1/1     Running   0          11m\nkube-proxy-pvw92                1/1     Running   0          11m\nkube-scheduler-node1            1/1     Running   0          11m\nroot@node1:/home/dys# kubectl get pods -n kube-flannel\nNAME                    READY   STATUS    RESTARTS   AGE\nkube-flannel-ds-p4sqj   1/1     Running   0          2m32s\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u914d\u7f6enode2",children:"\u914d\u7f6enode2"}),"\n",(0,t.jsx)(n.p,{children:"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u52a0\u5165\u96c6\u7fa4\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubeadm join 192.168.3.96:6443 --token yb65a1.p045bn1algxpvl5h \\\n        --discovery-token-ca-cert-hash sha256:fc7bc23017475064f73df1f2d91b30a80e4a405e77519a53524109d211eb7132 --cri-socket=unix:///var/run/cri-dockerd.sock\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u52a0\u5165\u5b8c\u6210\u540e\u53ef\u80fd\u4f1a\u62a5\u9a8c\u8bc1\u9519\u8bef\uff0c\u9700\u8981\u4ecenode1\u4ece\u5c0f\u62f7\u8d1d\u4e00\u4e0b\u8ba4\u8bc1\u4fe1\u606f\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'root@node3:/home/dys# kubectl get nodes\nE0414 02:22:46.133709   44601 memcache.go:265] couldn\'t get current server API group list: Get "https://192.168.3.96:6443/api?timeout=32s": tls: failed to verify certificate: x509: certificate signed by unknown authority (possibly because of "crypto/rsa: verification error" while trying to verify candidate authority certificate "kubernetes")\nE0414 02:22:46.137275   44601 memcache.go:265] couldn\'t get current server API group list: Get "https://192.168.3.96:6443/api?timeout=32s": tls: failed to verify certificate: x509: certificate signed by unknown authority (possibly because of "crypto/rsa: verification error" while trying to verify candidate authority certificate "kubernetes")\nE0414 02:22:46.140631   44601 memcache.go:265] couldn\'t get current server API group list: Get "https://192.168.3.96:6443/api?timeout=32s": tls: failed to verify certificate: x509: certificate signed by unknown authority (possibly because of "crypto/rsa: verification error" while trying to verify candidate authority certificate "kubernetes")\nE0414 02:22:46.143908   44601 memcache.go:265] couldn\'t get current server API group list: Get "https://192.168.3.96:6443/api?timeout=32s": tls: failed to verify certificate: x509: certificate signed by unknown authority (possibly because of "crypto/rsa: verification error" while trying to verify candidate authority certificate "kubernetes")\nE0414 02:22:46.147409   44601 memcache.go:265] couldn\'t get current server API group list: Get "https://192.168.3.96:6443/api?timeout=32s": tls: failed to verify certificate: x509: certificate signed by unknown authority (possibly because of "crypto/rsa: verification error" while trying to verify candidate authority certificate "kubernetes")\nUnable to connect to the server: tls: failed to verify certificate: x509: certificate signed by unknown authority (possibly because of "crypto/rsa: verification error" while trying to verify candidate authority certificate "kubernetes")\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fdb\u884c\u62f7\u8d1d\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"scp dys@node1:/etc/kubernetes/admin.conf /root/.kube/config\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u52a0\u5165\u540e\u9ed8\u8ba4\u89d2\u8272\u662fnone\uff0c\u800c\u8fd0\u884capiserver\u7b49\u670d\u52a1\u6216\u8005\u8bf4\u6267\u884cinit\u7684\u8282\u70b9\u662fcontrol-plane\uff0c\u76f8\u5f53\u4e8emaster\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"dys@node1:~$ kubectl get nodes -A\nNAME    STATUS   ROLES           AGE   VERSION\nnode1   Ready    control-plane   13h   v1.28.2\nnode2   Ready    <none>          13h   v1.28.2\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u8bbe\u7f6enode2\u4e3aworker\u8282\u70b9\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl label node node2 node-role.kubernetes.io/worker=\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6267\u884c\u5b8c\u6210\u540e\u67e5\u770b\u8282\u70b9\u4fe1\u606f\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"dys@node1:~$ kubectl get nodes -A\nNAME    STATUS   ROLES           AGE   VERSION\nnode1   Ready    control-plane   14h   v1.28.2\nnode2   Ready    worker          13h   v1.28.2\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u914d\u7f6enode3",children:"\u914d\u7f6enode3"}),"\n",(0,t.jsx)(n.p,{children:"node3\u7684\u914d\u7f6e\u6b65\u9aa4\u548cnode2\u5b8c\u5168\u4e00\u81f4\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubeadm join 192.168.3.96:6443 --token yb65a1.p045bn1algxpvl5h \\\n        --discovery-token-ca-cert-hash sha256:fc7bc23017475064f73df1f2d91b30a80e4a405e77519a53524109d211eb7132 --cri-socket=unix:///var/run/cri-dockerd.sock\nscp dys@node1:/etc/kubernetes/admin.conf /root/.kube/config\nkubectl get nodes -A\nkubectl label node node3 node-role.kubernetes.io/worker=\nkubectl get nodes -A\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u90e8\u7f72kubernetes-dashboard",children:"\u90e8\u7f72kubernetes-dashboard"}),"\n",(0,t.jsx)(n.p,{children:"\u4f7f\u7528\u5b98\u7f51\u63d0\u4f9b\u7684 deploy/recommended.yaml \u6e05\u5355\u5b89\u88c5 kubernetes-dashboard\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"wget https://raw.githubusercontent.com/kubernetes/dashboard/v2.5.0/aio/deploy/recommended.yaml -O  dashboard.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"root@node1:/home/dys# kubectl apply -f dashboard.yaml\nnamespace/kubernetes-dashboard created\nserviceaccount/kubernetes-dashboard created\nservice/kubernetes-dashboard created\nsecret/kubernetes-dashboard-certs created\nsecret/kubernetes-dashboard-csrf created\nsecret/kubernetes-dashboard-key-holder created\nconfigmap/kubernetes-dashboard-settings created\nrole.rbac.authorization.k8s.io/kubernetes-dashboard created\nclusterrole.rbac.authorization.k8s.io/kubernetes-dashboard created\nrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created\nclusterrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created\ndeployment.apps/kubernetes-dashboard created\nservice/dashboard-metrics-scraper created\ndeployment.apps/dashboard-metrics-scraper created\nroot@node1:/home/dys# kubectl get nodes -A\nNAME    STATUS   ROLES           AGE   VERSION\nnode1   Ready    control-plane   15h   v1.28.2\nnode2   Ready    worker          15h   v1.28.2\nnode3   Ready    worker          68m   v1.28.2\nroot@node1:/home/dys# kubectl get pods -A\nNAMESPACE              NAME                                         READY   STATUS             RESTARTS   AGE\nkube-flannel           kube-flannel-ds-ct7kr                        1/1     Running            0          69m\nkube-flannel           kube-flannel-ds-p4sqj                        1/1     Running            0          15h\nkube-flannel           kube-flannel-ds-skh4v                        1/1     Running            0          15h\nkube-system            coredns-66f779496c-gkdp7                     1/1     Running            0          15h\nkube-system            coredns-66f779496c-rjtgp                     1/1     Running            0          15h\nkube-system            etcd-node1                                   1/1     Running            0          15h\nkube-system            kube-apiserver-node1                         1/1     Running            0          15h\nkube-system            kube-controller-manager-node1                1/1     Running            0          15h\nkube-system            kube-proxy-h2mnz                             1/1     Running            0          15h\nkube-system            kube-proxy-pvw92                             1/1     Running            0          15h\nkube-system            kube-proxy-xf5ff                             1/1     Running            0          69m\nkube-system            kube-scheduler-node1                         1/1     Running            0          15h\nkubernetes-dashboard   dashboard-metrics-scraper-6fdb9d6cdd-grwj9   0/1     ImagePullBackOff   0          5m2s\nkubernetes-dashboard   kubernetes-dashboard-6fffdf99c9-fj44c        0/1     ImagePullBackOff   0          5m2s\nroot@node1:/home/dys#\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u67e5\u770b\u62c9\u53d6\u62a5\u9519\u7684\u539f\u56e0\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl -n kubernetes-dashboard describe pod kubernetes-dashboard-6fffdf99c9-fj44c\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u53ef\u4ee5\u770b\u5230dashboard\u5904\u4e8eImagePullBackOff\u72b6\u6001\uff0c\u4e00\u822c\u662f\u62c9\u53d6\u955c\u50cf\u5931\u8d25\uff08\u56fd\u5185\u7f51\u7edc\u88ab\u5899\u7684\u539f\u56e0\uff09\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u4fee\u6539dashboard.yaml\u4e2d\u7684image\uff0c\u5c06\u5176\u4fee\u6539\u4e3a\u53ef\u4ee5\u62c9\u53d6\u955c\u50cf\u7684\u5730\u5740\uff08\u6216\u8005\u672c\u5730\u5730\u5740\uff09,\u6bd4\u5982\u6539\u6210\u4e0b\u9762\u8fd9\u6837\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:"image: docker-0.unsee.tech/kubernetesui/dashboard:v2.7.0\n\nimage: docker-0.unsee.tech/kubernetesui/metrics-scraper:v1.0.8\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u7136\u540e\u91cd\u65b0\u521b\u5efa\u8d44\u6e90\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"kubectl delete -f dashboard.yaml\nkubectl apply -f dashboard.yaml\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u53ef\u4ee5\u770b\u5230pod\u5df2\u7ecf\u5904\u4e8e\u8fd0\u884c\u72b6\u6001\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"root@node1:/home/dys# kubectl get pod -A\nNAMESPACE              NAME                                         READY   STATUS    RESTARTS   AGE\nkube-flannel           kube-flannel-ds-ct7kr                        1/1     Running   0          3h34m\nkube-flannel           kube-flannel-ds-p4sqj                        1/1     Running   0          17h\nkube-flannel           kube-flannel-ds-skh4v                        1/1     Running   0          17h\nkube-system            coredns-66f779496c-gkdp7                     1/1     Running   0          17h\nkube-system            coredns-66f779496c-rjtgp                     1/1     Running   0          17h\nkube-system            etcd-node1                                   1/1     Running   0          17h\nkube-system            kube-apiserver-node1                         1/1     Running   0          17h\nkube-system            kube-controller-manager-node1                1/1     Running   0          17h\nkube-system            kube-proxy-h2mnz                             1/1     Running   0          17h\nkube-system            kube-proxy-pvw92                             1/1     Running   0          17h\nkube-system            kube-proxy-xf5ff                             1/1     Running   0          3h34m\nkube-system            kube-scheduler-node1                         1/1     Running   0          17h\nkubernetes-dashboard   dashboard-metrics-scraper-6d7bc7b457-njddc   1/1     Running   0          10m\nkubernetes-dashboard   kubernetes-dashboard-65bbb559f-dczct         1/1     Running   0          10m\n"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}}}]);