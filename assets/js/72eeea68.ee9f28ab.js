"use strict";(self.webpackChunkk_8_s_god=self.webpackChunkk_8_s_god||[]).push([[1278],{28453:(e,t,s)=>{s.d(t,{R:()=>p,x:()=>r});var a=s(96540);const n={},u=a.createContext(n);function p(e){const t=a.useContext(u);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:p(e.components),a.createElement(u.Provider,{value:t},e.children)}},30527:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>i,contentTitle:()=>r,default:()=>l,frontMatter:()=>p,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"vpp/fastup\u63d2\u4ef6\u52a0\u8f7d","title":"fastgtpu\u63d2\u4ef6\u52a0\u8f7d","description":"\u521d\u59cb\u5316","source":"@site/docs/vpp/fastup\u63d2\u4ef6\u52a0\u8f7d.md","sourceDirName":"vpp","slug":"/vpp/fastup\u63d2\u4ef6\u52a0\u8f7d","permalink":"/blog/docs/vpp/fastup\u63d2\u4ef6\u52a0\u8f7d","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/vpp/fastup\u63d2\u4ef6\u52a0\u8f7d.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"fastgtpu\u53d1\u5305\u6d4b\u8bd5\u8bf4\u660e\u6587\u6863","permalink":"/blog/docs/vpp/fastup\u53d1\u5305\u6d4b\u8bd5\u8bf4\u660e\u6587\u6863"},"next":{"title":"vpp\u9002\u914dptp\u65b9\u6848","permalink":"/blog/docs/vpp/fastup\u9002\u914dptp\u65b9\u6848"}}');var n=s(74848),u=s(28453);const p={},r="fastgtpu\u63d2\u4ef6\u52a0\u8f7d",i={},c=[{value:"\u521d\u59cb\u5316",id:"\u521d\u59cb\u5316",level:2},{value:"\u6536\u5305",id:"\u6536\u5305",level:2},{value:"\u53d1\u5305",id:"\u53d1\u5305",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",mermaid:"mermaid",pre:"pre",...(0,u.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"fastgtpu\u63d2\u4ef6\u52a0\u8f7d",children:"fastgtpu\u63d2\u4ef6\u52a0\u8f7d"})}),"\n",(0,n.jsx)(t.h2,{id:"\u521d\u59cb\u5316",children:"\u521d\u59cb\u5316"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",children:"VLIB_INIT_FUNCTION(fastgtpu_Init);\n"})}),"\n",(0,n.jsx)(t.mermaid,{value:"graph TB\nfastgtpu_Init--\x3epthread_create--\x3efastgtpu_ThroughputThread--\x3efastgtpu_CalcThroughput\nfastgtpu_Init--\x3e|\u6ce8\u518cudp\u7aef\u53e3,ip\u62a5\u6587\u6839\u636e\u8fd9\u4e2a\u5f80gtpu\u4f20\u62a5\u6587|udp_register_dst_port--\x3e|\u521d\u59cb\u5316\u53d1\u5305\u961f\u5217,\u53d1\u5305\u8282\u70b9\u5f80\u8fd9\u4e2a\u961f\u5217\u4e2d\u53d6\u6570\u636e|msgqueue_MsgqueueInit--\x3emsgqueue_MsgQueueCreate--\x3efastgtpu_MemInit--\x3e|\u521d\u59cb\u5316\u4e0a\u5c42\u8c03\u7528,\u6ce8\u518c\u6536\u5305\u56de\u8c03|fastgtpu_InitUp--\x3elibup_Init--\x3e|\u6ce8\u518c\u53d1\u9001\u56de\u8c03|libup_GtpuSendCallBackRegister--\x3efastgtpu_UpSend\nlibup_GtpuSendCallBackRegister--\x3elibup_Start"}),"\n",(0,n.jsx)(t.mermaid,{value:"graph TB\n\u4e0a\u5c42\u53d1\u9001--\x3efastgtpu_UpSend--\x3e|\u5206\u914d\u5185\u5b58|fastgtpu_MemMalloc--\x3e|\u5165\u961f|msgqueue_MsgEnqueue"}),"\n",(0,n.jsx)(t.h2,{id:"\u6536\u5305",children:"\u6536\u5305"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",children:"VLIB_REGISTER_NODE (g_stFastgtpuRxNode)\n"})}),"\n",(0,n.jsx)(t.mermaid,{value:"graph TB\nfastgtpu_RxFn--\x3evlib_frame_vector_args--\x3evlib_get_buffer--\x3e|\u6536\u5305\u56de\u8c03|pfnUpRcvCb"}),"\n",(0,n.jsx)(t.h2,{id:"\u53d1\u5305",children:"\u53d1\u5305"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-c",children:"VLIB_REGISTER_NODE (g_stFastgtpuTxNode)\n"})}),"\n",(0,n.jsx)(t.mermaid,{value:"graph TB\nfastgtpu_TxByIdxFn--\x3e|\u4ece\u961f\u5217\u53d6\u5305|msgqueue_MsgDequeue--\x3efastgtpu_GtpuPktEncap--\x3e|\u5c06\u5305\u653e\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9|vlib_buffer_enqueue_to_single_next\nfastgtpu_GtpuPktEncap--\x3evlib_buffer_add_data"})]})}function l(e={}){const{wrapper:t}={...(0,u.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}}}]);