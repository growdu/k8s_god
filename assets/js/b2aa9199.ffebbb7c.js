"use strict";(self.webpackChunkk_8_s_god=self.webpackChunkk_8_s_god||[]).push([[1097],{2979:(n,e,s)=>{s.d(e,{A:()=>c});const c=s.p+"assets/images/cpu_045_use-ceddac2a1602410f76011c82a990c753.png"},11358:(n,e,s)=>{s.d(e,{A:()=>c});const c=s.p+"assets/images/10min_no_drop-0e25574c0ae15fd81c6aa4f32a2cfadb.png"},13404:(n,e,s)=>{s.d(e,{A:()=>c});const c=s.p+"assets/images/nxp_other-5c90e2da9cd7d79b7032a027ff36f0e5.png"},26305:(n,e,s)=>{s.d(e,{A:()=>c});const c=s.p+"assets/images/cpub_24min_nodrop-e4bc9a8c2141138c268a90b8c5541ec9.png"},28453:(n,e,s)=>{s.d(e,{R:()=>i,x:()=>r});var c=s(96540);const l={},d=c.createContext(l);function i(n){const e=c.useContext(d);return c.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:i(n.components),c.createElement(d.Provider,{value:e},n.children)}},34999:(n,e,s)=>{s.d(e,{A:()=>c});const c=s.p+"assets/images/network-e4420adbeb352ac41400b5e82892794c.png"},39437:(n,e,s)=>{s.d(e,{A:()=>c});const c=s.p+"assets/images/ten_minute-452cd37b8ba593ef6ea4cce4f67a2cda.png"},57380:(n,e,s)=>{s.d(e,{A:()=>c});const c=s.p+"assets/images/23min_no_drop-94c8e20463d4f0f24f125f07e4e3ae8f.png"},57545:(n,e,s)=>{s.d(e,{A:()=>c});const c=s.p+"assets/images/start-2bfcb29cbc19a688c3c44e419f86e089.png"},75972:(n,e,s)=>{s.d(e,{A:()=>c});const c=s.p+"assets/images/two_minute-2e805bfff1cadc84cb139c4a424a8617.png"},78982:(n,e,s)=>{s.d(e,{A:()=>c});const c=s.p+"assets/images/nxp_other_more-f88aee9e98bf72c31077aa394f4ff754.png"},83797:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>p,contentTitle:()=>r,default:()=>x,frontMatter:()=>i,metadata:()=>c,toc:()=>a});const c=JSON.parse('{"id":"dpdk/l3fwd","title":"nxp l3fwd\u6d4b\u8bd5","description":"dpdk\u5c42\u4e09\u8f6c\u53d1\u3002","source":"@site/docs/dpdk/l3fwd.md","sourceDirName":"dpdk","slug":"/dpdk/l3fwd","permalink":"/blog/docs/dpdk/l3fwd","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/dpdk/l3fwd.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"shofastup\u6d4b\u8bd5","permalink":"/blog/docs/dpdk/fastup\u6d4b\u8bd5\u62a5\u544a"},"next":{"title":"linux\u5927\u9875\u5185\u5b58","permalink":"/blog/docs/dpdk/linux\u5927\u9875\u5185\u5b58"}}');var l=s(74848),d=s(28453);const i={},r="nxp l3fwd\u6d4b\u8bd5",p={},a=[{value:"\u6838\u5fc3\u7f51",id:"\u6838\u5fc3\u7f51",level:2},{value:"pktgen",id:"pktgen",level:3},{value:"\u6267\u884c\u6b65\u9aa4",id:"\u6267\u884c\u6b65\u9aa4",level:3},{value:"nxp",id:"nxp",level:2},{value:"\u6267\u884c\u6b65\u9aa4",id:"\u6267\u884c\u6b65\u9aa4-1",level:3},{value:"\u7ed3\u679c",id:"\u7ed3\u679c",level:3},{value:"\u4e22\u5305\u539f\u56e0\u5206\u6790",id:"\u4e22\u5305\u539f\u56e0\u5206\u6790",level:3},{value:"\u65e0\u4e22\u5305\u7ed3\u679c",id:"\u65e0\u4e22\u5305\u7ed3\u679c",level:3},{value:"\u6742\u5305\u5b9a\u4f4d",id:"\u6742\u5305\u5b9a\u4f4d",level:3},{value:"LLDP\u62a5\u6587\u6765\u6e90",id:"lldp\u62a5\u6587\u6765\u6e90",level:3},{value:"\u7ed3\u8bba",id:"\u7ed3\u8bba",level:2},{value:"\u601d\u8003",id:"\u601d\u8003",level:2}];function h(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"nxp-l3fwd\u6d4b\u8bd5",children:"nxp l3fwd\u6d4b\u8bd5"})}),"\n",(0,l.jsx)(e.p,{children:"dpdk\u5c42\u4e09\u8f6c\u53d1\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u6838\u5fc3\u7f51\uff08x86\u673a\u5668\uff09\u4f7f\u7528pktgen\u53d1\u5305\u5230nxpls2160\uff08arm\u673a\u5668\uff09\uff0cnxp\u901a\u8fc7dpdk l3fwd\u8fdb\u884c\u8f6c\u53d1\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u7f51\u7edc\u62d3\u6251\u56fe\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:s(34999).A+"",width:"967",height:"577"})}),"\n",(0,l.jsx)(e.p,{children:"\u8f6c\u53d1\u4f7f\u7528\u4e0d\u540c\u7684\u7f51\u53e3\uff0c\u5206\u4e3a\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u524d\u4f20"}),"\n",(0,l.jsx)(e.li,{children:"\u540e\u4f20"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u5177\u4f53\u6b65\u9aa4\u5206\u4e3a\u4e24\u6b65\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6838\u5fc3\u7f51\uff08x86\uff09\u8dd1pktgen"}),"\n",(0,l.jsx)(e.li,{children:"nxp\uff08arm\uff09\u8dd1l3fwd"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u6838\u5fc3\u7f51",children:"\u6838\u5fc3\u7f51"}),"\n",(0,l.jsx)(e.p,{children:"\u6838\u5fc3\u7f51\u4f7f\u7528pktgen\u751f\u6210\u5305\u8fdb\u884c\u53d1\u9001\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"pktgen",children:"pktgen"}),"\n",(0,l.jsx)(e.p,{children:"pktgen\u662f\u4e00\u4e2a\u4f4d\u4e8elinux\u5185\u6838\u5c42\u7684\u9ad8\u6027\u80fd\u7f51\u7edc\u6d4b\u8bd5\u5de5\u5177\uff0c\u4e3b\u8981\u7528\u6765\u6d4b\u8bd5\u7f51\u7edc\u9a71\u52a8\u4e0e\u7f51\u5361\u8bbe\u5907\uff0c\u652f\u6301\u591a\u7ebf\u7a0b\uff0c\u80fd\u591f\u4ea7\u751f\u968f\u673amac\u5730\u5740\u3001IP\u5730\u5740\u3001UDP\u7aef\u53e3\u53f7\u7684\u6570\u636e\u5305\u3002"}),"\n",(0,l.jsx)(e.p,{children:"pktgen\u57fa\u4e8edpdk\u5f00\u53d1\uff0c\u5728\u8fdb\u884c\u53d1\u5305\u65f6\uff0c\u9700\u8981\u4f7f\u7528dpdk\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u6267\u884c\u6b65\u9aa4",children:"\u6267\u884c\u6b65\u9aa4"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u51c6\u5907\u5de5\u5177\u677f\uff1b"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u7f16\u8bd1dpdk\uff1b"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u7f16\u8bd1pktgen\uff1b"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u914d\u7f6edpdk\uff1b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"modprobe uio\ncd dpdk-17.08/x86_64-native-linuxapp-gcc/kmod/\ninsmod igb_uio.ko\n#\u8bbe\u7f6e\u5927\u9875\necho 2048 > /sys/devices/system/node/node0/hugepages/hugepages-2048kB/nr_hugepages\ncd usertools\n#\u7ed1\u5b9a\u524d\u5148down\u6389\u7f51\u5361\nifconfig eno4 down\n#\u7ed1\u5b9a\u7f51\u5361\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u7684b5:00.2 (./dpdk-devbind.py \u2013status\n#\u53ef\u4ee5\u67e5\u5230)\uff0c\u4e5f\u53ef\u4ee5\u7528\u7f51\u5361\u540d\u5b57eno4\n./dpdk-devbind.py -b  igb_uio  b5:00.2\n#\u67e5\u770b\u7f51\u5361\u72b6\u6001\n./dpdk-devbind.py \u2013status\n#\u7ed1\u5b9a\u6210\u529f\u4f1a\u663e\u793ab5:00.2\u88abDPDK\u63a5\u7ba1\n#\u6362\u6210\u666e\u901a\u9a71\u52a8\n./dpdk-devbind.py -b i40e 0000:b5:00.2\nifconfig eno4 121.168.1.13\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u914d\u7f6epktgen\uff1b"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u6267\u884cpktgen\uff1b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"cd /home/liubin/new2/pktgen-dpdk-pktgen-3.4.2\n./app/x86_64-native-linuxapp-gcc/pktgen -c 0x31 --socket-mem 2048 -n 2 -- -P -m [4:5].0 -s 0:5gc.pcap -T --crc-strip\n\n./app/x86_64-native-linuxapp-gcc/pktgen -c 0xe0000 --socket-mem 2048 -n 2 -- -P -m [18:19].0 -s 0:5gc.pcap -T --crc-strip\n./app/x86_64-native-linuxapp-gcc/pktgen -c 0xe0000 --socket-mem 2048 -n 2 -- -P -m [18:19].1 -s 1:5gc.pcap -T --crc-strip\n# -c cpu core mask\n# -m [18:19].1 18core\u7528\u6765\u505arx\uff0c19core\u7528\u6765\u4f5ctx\uff0c\u4f7f\u7528dpdk\u7684port1\n# -s 1:5gc.pcap \u4f7f\u7528port1\u6765\u56de\u653e5gc.pcap\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"#\u542f\u52a8\u53d1\u5305\n>> str\n#\u505c\u6b62\u53d1\u5305\n>> stp\n#\u8bbe\u7f6e\u7aef\u53e30\u6309\u7ebf\u901f\u768499%\u53d1\u5305\n>> set 0 rate 99% \n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"pktgen\u53c2\u6570\u8bf4\u660e"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"nxp",children:"nxp"}),"\n",(0,l.jsx)(e.p,{children:"nxp\u4f7f\u7528l3fwd\u8fdb\u884c\u8f6c\u53d1\uff0cl3fwd\u662fdpdk\u63d0\u4f9b\u7684\u4e09\u5c42\u8f6c\u53d1example\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u6267\u884c\u6b65\u9aa4-1",children:"\u6267\u884c\u6b65\u9aa4"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u51c6\u5907\u5de5\u5177\u677f\uff1b"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u7ba1\u7406\u53e3"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"10.252.6.2 root root\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"cpu1"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"ssh root@172.168.1.12\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"cpu2"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"ssh root@114.168.1.12\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u7f16\u8bd1dpdk\uff1b"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"not support kni"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# \u6253\u5305\u4ee3\u7801\u4e0a\u4f20\nscp dpdk-18.11.1-rc2.zip duanyingshou@10.252.0.19:/home/duanyingshou/dpdk/\n# \u62f7\u8d1darm64-dpaa-linuxapp-gcc\u5230dpdk\u76ee\u5f55\u4e0b\ncp /home/xiaotao/dpdk-18.11.1-rc2/arm64-dpaa-linuxapp-gcc ./ -R\n# \u89e3\u538b\u7f29\nunzip dpdk-18.11.1-rc2.zip\n# \u4ea4\u53c9\u7f16\u8bd1\uff0c\u4f7f\u7528dpaa2\nexport CROSS=aarch64-linux-gnu-\nmake config T=arm64-dpaa2-linuxapp-gcc\nmake T=arm64-dpaa2-linuxapp-gcc -j 4 CONFIG_RTE_KNI_KMOD=n CONFIG_RTE_EAL_IGB_UIO=n install \nexport RTE_TARGET=arm64-dpaa2-linuxapp-gcc\nexport RTE_SDK= <path/to/DPDK/source/code>\nmake -C examples/l3fwd\n# \u4ea4\u53c9\u7f16\u8bd1\uff0c\u4f7f\u7528dpaa\nexport CROSS=aarch64-linux-gnu-\nmake config T=arm64-dpaa-linuxapp-gcc\nmake T=arm64-dpaa-linuxapp-gcc -j 4 CONFIG_RTE_KNI_KMOD=n CONFIG_RTE_EAL_IGB_UIO=n install \n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"support kni"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"export CROSS=aarch64-linux-gnu-\nmake config T=arm64-dpaa2-linuxapp-gcc\nexport RTE_KERNELDIR=/home/duanyingshou/linux\nmake T=arm64-dpaa2-linuxapp-gcc CONFIG_RTE_KNI_KMOD=y CONFIG_RTE_EAL_IGB_UIO=n install  -j 32\nmake examples T=arm64-dpaa2-linuxapp-gcc\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u7f16\u8bd1l3fwd\uff1b"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"nxp"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"export RTE_TARGET=arm64-dpaa2-linuxapp-gcc\nexport RTE_SDK= <path/to/DPDK/source/code>\nmake -C examples/l3fwd\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"x86"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"export RTE_TARGET=x86_64-native-linuxapp-gcc\nexport RTE_SDK= <path/to/DPDK/source/code>\nmake -C examples/l3fwd\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u4e0a\u4f20\u7a0b\u5e8f"}),"\n",(0,l.jsx)(e.p,{children:"nxp\u5df2\u5305\u542bdpdk\u9a71\u52a8\uff0c\u56e0\u800c\u53ea\u9700\u4e0a\u4f20\u5982\u4e0b\u6587\u4ef6\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"dpdk\u5e94\u7528"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"l3fwd"}),"\n",(0,l.jsx)(e.li,{children:"pktgen"}),"\n",(0,l.jsx)(e.li,{children:"testpmd"}),"\n",(0,l.jsx)(e.li,{children:"......"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"dpaa2"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"dynamic_dpl.sh"}),"\n",(0,l.jsx)(e.li,{children:"destroy_dynamic_dpl.sh"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u4e0a\u4e24\u4e2a\u6587\u4ef6\u7528\u6765\u5bf9\u7f51\u5361\u8fdb\u884c\u9a71\u52a8\u5207\u6362\uff0c\u7c7b\u4f3c\u4e8ex86\u4e0b\u7684dpdk-devbind\u811a\u672c\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u914d\u7f6edpdk\uff1b"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u6fc0\u6d3b\u7f51\u5361"}),"\n",(0,l.jsx)(e.p,{children:"\u9ed8\u8ba4\u7f51\u5361\u662fdown\u7684\u72b6\u6001\uff0c\u9700\u8981\u4f7f\u7528ifconfig\u914d\u7f6eip\u6fc0\u6d3b\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"ifconfig eth3 121.168.1.12\nifconfig eth4 121.168.1.11\n#\u7f51\u5361up\u8f83\u6162\uff0c\u53ef\u4ee5\u5728\u53e6\u4e00\u7aef\u4f7f\u7528ping\u5feb\u901f\u6fc0\u6d3b\u7f51\u5361\nping 121.168.1.12\n"})}),"\n",(0,l.jsx)("font",{color:"red",children:"\u6ce8\u610f\uff1a\u5fc5\u987b\u5148\u6fc0\u6d3b\u7f51\u5361\uff0c\u4e0d\u7136\u540e\u7eed\u8fd0\u884cl3fwd\u65f6\u4f1a\u51fa\u73b0port 0 link down\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5207\u6362dpdk\u9a71\u52a8"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:'# \u6839\u636e\u5b9e\u9645\u60c5\u51b5\u6765\u786e\u5b9a\u4f7f\u7528\u54ea\u5f20\u7f51\u5361\n./dpaa2/dynamic_dpl.sh dpmac.4\nexport DPRC="dprc.2"\n'})}),"\n",(0,l.jsxs)("font",{color:"red",children:[(0,l.jsx)(e.strong,{children:"\u6ce8\u610f"}),'\uff1a\u8fd0\u884c\u524d\u9700\u8981\u5bfc\u51fa\u73af\u5883\u53d8\u91cf export DPRC="dprc.2"']}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u914d\u7f6e\u6267\u884cl3fwd\uff1b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:'./l3fwd -c 0x3 -n 4 -- -P -p 0x3 --config="(0,0,1)"\n./l3fwd -c 0x3 -n 4 -- -P -p 0x1 --config="(0,0,1)"\n./l3fwd -c 0x100000 -n 4 -- -P -p 0x1 --config="(0,0,20)"\n# -c cpu coremask\uff0c\u9700\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\uff0c\u6bcf\u4e00\u4f4d\u4ee3\u8868\u4e00\u4e2a\u6838\uff0cbit\u4f4d\u4e3a1\u8868\u793a\u4f7f\u7528\u8be5\u6838\n# -n \u5f00\u542f\u7684\u901a\u9053\u6570\n# -P \u5168\u90e8\u8f6c\u53d1\n# -p port mask,\u53ef\u4ee5\u4f7f\u7528\u7684port\uff0c\u9700\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\uff0c\u6bcf\u4e00\u4f4d\u4ee3\u8868\u4e00\u4e2a\u6838\uff0cbit\u4f4d\u4e3a1\u8868\u793a\u4f7f\u7528\u8be5port\n# --config="(0,0,1)"Map queue 0 from port 0 to lcore 1\n'})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u7edf\u8ba1\u4e22\u5305\u7387\uff1b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# \u67e5\u770b\u7f51\u53e3\u6536\u53d1\u5305\u60c5\u51b5\nrestool dpmac info dpmac.4\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5bf9\u6bd4\u4e24\u7aefrx\u3001tx\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u7ed3\u679c",children:"\u7ed3\u679c"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5f00\u59cb"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u5f00\u59cb\u6d41\u91cf\u60c5\u51b5\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:s(57545).A+"",width:"948",height:"919"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"2\u5206\u949f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:s(75972).A+"",width:"1715",height:"1058"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"10\u5206\u949f"}),"\n",(0,l.jsx)(e.p,{children:"10\u5206\u949f\u65f6\u5e76\u672a\u51fa\u73b0\u8f6c\u53d1\u9519\u8bef\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:s(39437).A+"",width:"1678",height:"974"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"20\u5206\u949f"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:s(88735).A+"",width:"1676",height:"983"})}),"\n",(0,l.jsx)(e.p,{children:"20\u5206\u949f\u5185\u603b\u5171\u67095\u4e2a\u5305\u8f6c\u53d1\u51fa\u9519\uff0c\u5171\u4e22\u593153\u4e2a\u5305\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u4e22\u5305\u539f\u56e0\u5206\u6790",children:"\u4e22\u5305\u539f\u56e0\u5206\u6790"}),"\n",(0,l.jsx)(e.p,{children:"\u6211\u4eec\u7684\u5b9e\u6d4b\u8fc7\u7a0b\u4e2d\uff0cpktgen\u53d1\u9001\u7684\u90fd\u662f\u5927\u5305\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u7531\u4e0a\u9762\u7684\u56fe\u5206\u6790\u53ef\u77e5\uff1a"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u7f51\u7edc\u4e2d\u5b58\u5728\u6742\u5305\uff0c\u537365-127\u5b57\u8282\u7684\u5305\uff1b"}),"\n",(0,l.jsx)(e.li,{children:"pktgen\u53d1\u9001\u548c\u63a5\u6536\u5305\u4e2a\u6570\u4e0d\u76f8\u7b49\uff0c\u65e0\u6cd5\u786e\u8ba4\u4e22\u5305\u662f\u5728\u54ea\u4e2a\u73af\u8282\uff0c\u9700\u8fdb\u884c\u4e24\u7aef\u5bf9\u6bd4\u6392\u67e5\uff1b"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u7ecf\u8fc7\u5bf9\u6bd4\u53d1\u73b0\uff0c\u542f\u52a8pktgen\u7684\u547d\u4ee4\u4f7f\u7528\u7684\u6838\u4f1a\u88ab\u5176\u4ed6\u7a0b\u5e8f\u62a2\u5360\uff0c\u5bfc\u81f4cpu\u5207\u6362\u3002\u5728\u6267\u884c\u65f6\uff0c\u7ed1\u5b9a\u5176\u4ed6\u7a0b\u5e8f\u4e0d\u4f7f\u7528\u7684\u6838\u53ef\u907f\u514d\u4e22\u5305\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u6267\u884cpktgen\u65f6\uff0c\u5c06\u4f7f\u75280\u6838\u6267\u884cpktgen\u7ba1\u7406\u7a0b\u5e8f\uff0c4\u6838\u8fdb\u884c\u53d1\u5305\uff0c5\u6838\u8fdb\u884c\u6536\u5305\uff1b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"./app/x86_64-native-linuxapp-gcc/pktgen -c 0x31 --socket-mem 2048 -n 2 -- -P -m [4:5].0 -s 0:5gc.pcap -T --crc-strip\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u5b9e\u9645\u673a\u5668\u4e0a\u8fd0\u884c\u65f6\uff0cpktgen\u7684rx\u548ctx\u5e76\u975e\u72ec\u5360\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:s(2979).A+"",width:"1667",height:"891"})}),"\n",(0,l.jsx)(e.p,{children:"\u66f4\u6362\u6210\u5982\u4e0b\u547d\u4ee4\uff0cpktgen\u5c06\u4f7f\u752817\u6838\u6267\u884cpktgen\u7ba1\u7406\u7a0b\u5e8f\uff0c18\u6838\u8fdb\u884c\u53d1\u5305\uff0c19\u6838\u8fdb\u884c\u6536\u5305\uff1b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"./app/x86_64-native-linuxapp-gcc/pktgen -c 0xe0000 --socket-mem 2048 -n 2 -- -P -m [18:19].0 -s 0:5gc.pcap -T --crc-strip\n"})}),"\n",(0,l.jsx)("font",{color:"red",children:"\u5728\u6267\u884c\u7a0b\u5e8f\u65f6\uff0c\u9700\u7559\u610f\u73b0\u6709cpu\u6838\u7684\u4f7f\u7528\u60c5\u51b5\uff0c\u5c3d\u91cf\u4f7f\u7a0b\u5e8f\u72ec\u5360\u6838\uff0c\u907f\u514d\u4e0e\u5176\u4ed6\u7cfb\u7edf\u4e0a\u7684\u7a0b\u5e8f\u53d1\u9001\u8c03\u5ea6\u3002"}),"\n",(0,l.jsx)(e.h3,{id:"\u65e0\u4e22\u5305\u7ed3\u679c",children:"\u65e0\u4e22\u5305\u7ed3\u679c"}),"\n",(0,l.jsx)(e.p,{children:"10min\u65f6\u65e0\u4e22\u5305\uff0c\u60c5\u51b5\u5982\u4e0b\u56fe\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:s(11358).A+"",width:"1655",height:"890"})}),"\n",(0,l.jsx)(e.p,{children:"23min\u65f6\u65e0\u4e22\u5305\uff0c\u60c5\u51b5\u5982\u4e0b\u56fe\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:s(57380).A+"",width:"1130",height:"901"})}),"\n",(0,l.jsx)(e.p,{children:"\u4ee5\u4e0a\u4e3a\u4f7f\u7528cpu-A\u8dd1\u7684\u7ed3\u679c\uff0c\u8fbe\u5230\u7ebf\u901f\uff0c\u65e0\u4e22\u5305\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528cpu-B\u540c\u6837\u8fbe\u5230\u7ebf\u901f\uff0c\u65e0\u4e22\u5305\u300217\u5206\u949f\u7ed3\u679c\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:s(91180).A+"",width:"1149",height:"899"})}),"\n",(0,l.jsx)(e.p,{children:"24\u5206\u949f\u7ed3\u679c\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:s(26305).A+"",width:"1100",height:"890"})}),"\n",(0,l.jsx)(e.h3,{id:"\u6742\u5305\u5b9a\u4f4d",children:"\u6742\u5305\u5b9a\u4f4d"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)("font",{color:"red",children:"nxp\u7aef\u5b58\u5728\u6742\u5305\uff0c\u4e3a110\u5b57\u8282\u5927\u5c0f\u3002\u901a\u8fc7\u6293\u5305\u53d1\u73b0\uff0c\u6742\u5305\u4e3aLLDP\u62a5\u6587\uff0c\u6bcf30\u79d2\u53d1\u9001\u4e00\u6b21\u3002"}),"\u5728\u6d4b\u8bd5\u65f6\u82e5\u51fa\u73b0\u4e22\u5305\uff0c\u8be5\u7c7b\u62a5\u6587\u5bf9\u5206\u6790\u6742\u5305\u4f1a\u5b58\u5728\u8f83\u5927\u5e72\u6270\u3002"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"LLDP"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u94fe\u8def\u5c42\u53d1\u73b0\u534f\u8bae"}),"\uff08Link Layer Discovery Protocol\uff0cLLDP\uff09\u662f\u4e00\u79cd",(0,l.jsx)(e.a,{href:"https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82",children:"\u6570\u636e\u94fe\u8def\u5c42"}),"\u534f\u8bae\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u7f51\u7edc\u8bbe\u5907\u53ef\u4ee5\u901a\u8fc7\u5728\u672c\u5730\u7f51\u7edc\u4e2d\u53d1\u9001LLDPDU\uff08Link Layer Discovery Protocol Data Unit\uff09\u6765\u901a\u544a\u5176\u4ed6\u8bbe\u5907\u81ea\u8eab\u7684\u72b6\u6001\u3002\u662f\u4e00\u79cd\u80fd\u591f\u4f7f\u7f51\u7edc\u4e2d\u7684\u8bbe\u5907\u4e92\u76f8\u53d1\u73b0\u5e76\u901a\u544a\u72b6\u6001\u3001\u4ea4\u4e92\u4fe1\u606f\u7684\u534f\u8bae\u3002"}),"\n",(0,l.jsx)(e.p,{children:"\u6742\u5305\u60c5\u51b5\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:s(78982).A+"",width:"1144",height:"771"})}),"\n",(0,l.jsx)(e.p,{children:"\u901a\u8fc7\u5bf9\u6bd4mac\u5730\u5740\u53ef\u53d1\u73b0\u786e\u5b9e\u4e3anxp\u7aef\u53d1\u51fa\u7684\u62a5\u6587\uff0c\u5982\u4e0b\u56fe\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:s(13404).A+"",width:"1449",height:"887"})}),"\n",(0,l.jsx)(e.h3,{id:"lldp\u62a5\u6587\u6765\u6e90",children:"LLDP\u62a5\u6587\u6765\u6e90"}),"\n",(0,l.jsx)(e.p,{children:"\u9605\u8bfbnxp\u7528\u6237\u624b\u518c\u53d1\u73b0\uff1a"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"The DPAA2 Ethernet driver supports enabling PFC for a subset of the traffic classes. This configuration is done using a higher\nlevel protocol, LLDP - Link Layer Discovery Protocol."}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"dpaa2\u652f\u6301LLDP\u534f\u8bae\u3002"}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"There's a current known limitation for PFC to work only with DPNIs created using the DPL. DPNIs created with restool will not\nbehave as expected."}),"\n"]}),"\n",(0,l.jsx)("font",{color:"red",children:"\u4f7f\u7528DPL\u65b9\u5f0f\u521b\u5efaDPNI\u65f6\u9ed8\u8ba4\u4f1a\u542f\u7528PFC\uff0c\u5373LLDP\u534f\u8bae\u3002\u4f7f\u7528restool\u521b\u5efaDPNI\u4e0d\u4f1a\u542f\u7528RFC\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u7ed3\u8bba",children:"\u7ed3\u8bba"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u6838\u5fc3\u7f51\u5230nxp\u80fd\u8fbe\u5230\u7ebf\u901f\uff0c\u4e14\u96f6\u4e22\u5305"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"nxp\u7aef\u542f\u52a8l3fwd\u4f1a\u6bcf30\u79d2\u53d1\u9001LLDP\u62a5\u6587\uff0c\u4f1a\u5bf9\u6d4b\u8bd5\u8fdb\u884c\u5e72\u6270(\u4e22\u5305\u60c5\u51b5\u4e0b)"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)("font",{color:"red",children:"cpu-A\u548ccpu-B\u5747\u8fbe\u5230\u7ebf\u901f\uff0c\u4e14\u65e0\u4e22\u5305"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u601d\u8003",children:"\u601d\u8003"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"nxp\u7f51\u53e3\u4ecedown\u72b6\u6001\u5230up\u72b6\u6001\u6240\u9700\u65f6\u95f4\u8f83\u957f\uff0c\u540e\u7eed\u9700\u7559\u610f"}),"\n",(0,l.jsx)(e.li,{children:"nxp\u677f\u5df2\u5305\u542bdpdk\u9a71\u52a8\uff0c\u7528\u6237\u6001\u65e0\u6cd5\u770b\u5230dpdk\u76f8\u5173\u5b9e\u73b0\uff0c\u540e\u7eed\u4e5f\u9700\u7559\u610f"}),"\n"]})]})}function x(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(h,{...n})}):h(n)}},88735:(n,e,s)=>{s.d(e,{A:()=>c});const c=s.p+"assets/images/twenty_minute-06add349944fb52b6a4bee1478782230.png"},91180:(n,e,s)=>{s.d(e,{A:()=>c});const c=s.p+"assets/images/cpub_nodrop-8183d9c7d5679274c4cca114317eb63e.png"}}]);