"use strict";(self.webpackChunkk_8_s_god=self.webpackChunkk_8_s_god||[]).push([[5129],{28453:(n,e,s)=>{s.d(e,{R:()=>c,x:()=>p});var t=s(96540);const l={},i=t.createContext(l);function c(n){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function p(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:c(n.components),t.createElement(i.Provider,{value:e},n.children)}},78157:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>d,contentTitle:()=>p,default:()=>u,frontMatter:()=>c,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"vpp/fastup\u53d1\u5305\u6d4b\u8bd5\u8bf4\u660e\u6587\u6863","title":"fastgtpu\u53d1\u5305\u6d4b\u8bd5\u8bf4\u660e\u6587\u6863","description":"fastgtpu\u4f5c\u4e3avpp\u7684\u4e00\u4e2a\u63d2\u4ef6\uff0c\u53ea\u80fd\u88ab\u52a8\u6536\u5305\uff0c\u65e0\u6cd5\u4e3b\u52a8\u53d1\u5305\uff0c\u9700\u5bf9\u5176\u8fdb\u884c\u53d1\u5305\u9002\u914d\u3002","source":"@site/docs/vpp/fastup\u53d1\u5305\u6d4b\u8bd5\u8bf4\u660e\u6587\u6863.md","sourceDirName":"vpp","slug":"/vpp/fastup\u53d1\u5305\u6d4b\u8bd5\u8bf4\u660e\u6587\u6863","permalink":"/blog/docs/vpp/fastup\u53d1\u5305\u6d4b\u8bd5\u8bf4\u660e\u6587\u6863","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/vpp/fastup\u53d1\u5305\u6d4b\u8bd5\u8bf4\u660e\u6587\u6863.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"fastup kni\u8bbe\u8ba1\u5b9e\u73b0\u8bf4\u660e\u6587\u6863","permalink":"/blog/docs/vpp/fastup kni\u8bbe\u8ba1\u5b9e\u73b0\u8bf4\u660e\u6587\u6863"},"next":{"title":"fastgtpu\u63d2\u4ef6\u52a0\u8f7d","permalink":"/blog/docs/vpp/fastup\u63d2\u4ef6\u52a0\u8f7d"}}');var l=s(74848),i=s(28453);const c={},p="fastgtpu\u53d1\u5305\u6d4b\u8bd5\u8bf4\u660e\u6587\u6863",d={},r=[{value:"fastgtpu\u4e3b\u52a8\u53d1\u5305",id:"fastgtpu\u4e3b\u52a8\u53d1\u5305",level:2},{value:"\u63a7\u5236\u53c2\u6570",id:"\u63a7\u5236\u53c2\u6570",level:3},{value:"\u63a7\u5236\u6a21\u578b",id:"\u63a7\u5236\u6a21\u578b",level:2},{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:2},{value:"cli",id:"cli",level:2}];function a(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"fastgtpu\u53d1\u5305\u6d4b\u8bd5\u8bf4\u660e\u6587\u6863",children:"fastgtpu\u53d1\u5305\u6d4b\u8bd5\u8bf4\u660e\u6587\u6863"})}),"\n",(0,l.jsx)(e.h1,{id:"\u80cc\u666f",children:"\u80cc\u666f"}),"\n",(0,l.jsx)(e.p,{children:"fastgtpu\u4f5c\u4e3avpp\u7684\u4e00\u4e2a\u63d2\u4ef6\uff0c\u53ea\u80fd\u88ab\u52a8\u6536\u5305\uff0c\u65e0\u6cd5\u4e3b\u52a8\u53d1\u5305\uff0c\u9700\u5bf9\u5176\u8fdb\u884c\u53d1\u5305\u9002\u914d\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"fastgtpu\u4e3b\u52a8\u53d1\u5305",children:"fastgtpu\u4e3b\u52a8\u53d1\u5305"}),"\n",(0,l.jsx)(e.h3,{id:"\u63a7\u5236\u53c2\u6570",children:"\u63a7\u5236\u53c2\u6570"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u53d1\u5305\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.p,{children:"\u5171\u6709\u4e09\u79cd\u53d1\u5305\u6a21\u5f0f\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u72ec\u7acb\u7ebf\u7a0b\u53d1\u5305\uff08\u901f\u7387\u53ef\u914d\u7f6e\uff09"}),"\n",(0,l.jsx)(e.li,{children:"\u72ec\u7acb\u7ebf\u7a0b1:1\u56de\u5305"}),"\n",(0,l.jsx)(e.li,{children:"\u5728fastgtpu\u7ebf\u7a0b\u4e2d1:1\u56de\u5305"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u53d1\u5305\u901f\u7387"}),"\n",(0,l.jsx)(e.p,{children:"\u53d1\u5305\u901f\u7387\u4e3b\u8981\u901a\u8fc7pps\u6765\u63a7\u5236\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u53d1\u5305\u63a7\u5236"}),"\n",(0,l.jsx)(e.p,{children:"\u53ef\u901a\u8fc7\u5982\u4e0b\u53c2\u6570\u5bf9\u53d1\u5305\u8fdb\u884c\u63a7\u5236\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u9700\u8981\u53d1\u9001\u7684\u603b\u7684\u5305\u4e2a\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u53d1\u9001\u5b8c\u540e\u5373\u505c\u6b62"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"pps"}),"\n",(0,l.jsx)(e.p,{children:"\u8bbe\u7f6e\u6bcf\u79d2\u53d1\u9001\u7684\u62a5\u6587\u6570"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u62a5\u6587\u5305\u957f"}),"\n",(0,l.jsx)(e.p,{children:"\u8bbe\u7f6e\u6bcf\u4e2a\u62a5\u6587\u7684\u957f\u5ea6"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u6279\u91cf\u53d1\u5305\u4e2a\u6570"}),"\n",(0,l.jsx)(e.p,{children:"\u8bbe\u7f6e\u6bcf\u4e00\u6b21\u5c06\u591a\u5c11\u4e2a\u5305\u9001\u5230\u53d1\u9001\u961f\u5217\u91cc\u9762\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u63a7\u5236\u6a21\u578b",children:"\u63a7\u5236\u6a21\u578b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-c",children:"// \u4e3b\u52a8\u53d1\u5305\u6d4b\u8bd5\u6a21\u5f0f\nenum fastgtpu_tx_debug_mode {\n    TX_SIGNEL_THREAD_FULL = 1, // tx\u5728\u72ec\u7acb\u7ebf\u7a0b\u4e2d\u5168\u529b\u53d1\u5305\n    TX_SIGNEL_THREAD_ECHO =2,  // tx\u5728\u72ec\u7acb\u7ebf\u7a0b\u4e2d1:1\u56de\u4f20\u62a5\u6587\n    TX_FASTGTPU_THREAD_ECHO =3 // tx\u5728fastgtpu\u7ebf\u7a0b\u4e2d1:1\u56de\u4f20\u62a5\u6587\n};\n\n// \u4e3b\u52a8\u53d1\u5305\u63a7\u5236\u7ed3\u6784\nstruct fastgtpu_tx_debug_t {\n    enum fastgtpu_tx_debug_mode mode;\n    uint64_t rx_count; // \u6536\u5230\u7684\u62a5\u6587\u6570\n    uint64_t tx_count; // \u5df2\u7ecf\u53d1\u9001\u7684\u62a5\u6587\u6570\n    uint64_t tx_plan_count; // \u5168\u91cf\u53d1\u5305\u8ba1\u5212\u53d1\u9001\u7684\u62a5\u6587\u6570\uff0c\u5230\u8fbe\u6b64\u503c\u65f6\u505c\u6b62\u53d1\u9001\n    uint64_t pps;   // \u53d1\u5305\u901f\u7387\uff0c\u6309pps\u7b97\n    uint32_t length; // \u62a5\u6587\u957f\u5ea6\n    uint8_t  run_flag; // \u8fd0\u884c\u6807\u5fd7\uff0c1 \u8fd0\u884c\uff1b0 \u505c\u6b62\n    uint32_t bulk_count; // \u5168\u91cf\u53d1\u5305\u65f6\u6279\u91cf\u53d1\u5305\u4e2a\u6570\n    ip4_address_t src_addr4;\n    ip4_address_t dst_addr4;\n};\n\n\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u914d\u7f6e",children:"\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u542f\u52a8\u65f6\u53ef\u5728startup.conf\u542f\u52a8\u6587\u4ef6\u4e2d\u6dfb\u52a0fastgtpu\u914d\u7f6e\u6a21\u5757\uff0c\u8fdb\u884c\u53c2\u6570\u914d\u7f6e\u548c\u529f\u80fd\u5f00\u542f\u3002\u914d\u7f6e\u6837\u4f8b\u5982\u4e0b\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"fastgtpu {\n\t\t# \u53d1\u9001\u6a21\u5f0f\uff0c\u53d6\u503c1,2,3;\n\t\t# 1 \u72ec\u7acb\u7ebf\u7a0b\u53d1\u5305\uff08\u901f\u7387\u53ef\u914d\u7f6e\uff09\n\t\t# 2 \u72ec\u7acb\u7ebf\u7a0b1:1\u56de\u5305\n\t\t# 3 \u5728fastgtpu\u7ebf\u7a0b\u4e2d1:1\u56de\u5305\n        tx-debug-mode 1\n        # \u53d1\u9001\u7684\u603b\u62a5\u6587\uff0c\u503c\u4e3a2\u7684\u5e42\u6b21\u65b9\n        # 30\u8868\u793a\u8981\u53d1\u90012^30\u4e2a\u62a5\u6587\n        tx-debug-send 30\n        # \u6279\u91cf\u53d1\u5305\u7684\u4e2a\u6570\n        # 20\u8868\u793a\u6bcf\u6b21\u53d1\u5305\u53d1\u900120\u4e2a\u62a5\u6587\n        tx-debug-bulk-count 20\n        # \u8bbe\u7f6e\u62a5\u6587\u53d1\u9001\u901f\u7387\n        # \u5982800000\u8868\u793a\u6bcf\u79d2\u53d1\u9001800000\u4e2a\u62a5\u6587\n        tx-debug-pps 800000\n        # \u8bbe\u7f6e\u62a5\u6587\u957f\u5ea6\n        tx-debug-length 1000\n        # \u53d1\u9001\u961f\u5217\u5927\u5c0f\uff0c\u503c\u4e3a2\u7684\u5e42\u6b21\u65b9\n        # \u598220\u8868\u793a\u53d1\u9001\u961f\u5217\u5927\u5c0f\u4e3a2^20\n        tx-queue 20\n        # \u62a5\u6587\u662f\u5426\u9001\u5f80\u8fd0\u7528\u5c42\uff0c\u914d\u7f6e\u8be5\u53c2\u6570\u540e\u6536\u5230\u62a5\u6587\u76f4\u63a5\u4e22\u5f03\uff0c\u4e0d\u505a\u4efb\u4f55\u5904\u7406\n        tx-to-application-off\n}\n"})}),"\n",(0,l.jsx)(e.h2,{id:"cli",children:"cli"}),"\n",(0,l.jsx)(e.p,{children:"\u53ef\u4ee5\u901a\u8fc7vppctl\u53d1\u9001\u547d\u4ee4\u5bf9\u53d1\u5305\u6d4b\u8bd5\u8fdb\u884c\u63a7\u5236\u3002"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u542f\u52a8\u53d1\u5305"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"vpp# start fastgtpu test\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u505c\u6b62\u53d1\u5305"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"vpp# stop fastgtpu test\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u8bbe\u7f6e\u901f\u7387"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"vpp# set fastgtpu test pps 1000\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u8bbe\u7f6e\u5305\u957f"}),"\n",(0,l.jsx)("font",{color:"red",children:"\u82e5\u672a\u8bbe\u7f6e\u62a5\u6587\u957f\u5ea6\uff0c\u9ed8\u8ba4\u4e3a1460.\uff08\u62a5\u6587\u957f\u5ea6\u8bbe\u7f6e\u6682\u672a\u5b9e\u73b0\uff09"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"vpp# set fastgtpu test length 1000\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u8bbe\u7f6e\u53d1\u9001\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"vpp# set fastgtpu test mode 2\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u8bbe\u7f6e\u53d1\u5305\u6d4b\u8bd5\u6e90ip"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"vpp# set fastgtpu ip src <ip>\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u8bbe\u7f6e\u53d1\u5305\u6d4b\u8bd5\u76ee\u7684ip"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"vpp# set fastgtpu ip dst <ip>\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u67e5\u770b\u5305\u957f\u3001\u901f\u7387\u3001\u6536\u53d1\u5305"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"vpp# show fastgtpu stats\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u6e05\u695a\u6536\u53d1\u5305\u7b49\u7edf\u8ba1\u4fe1\u606f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"vpp# clear fastgtpu\n"})}),"\n"]}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(a,{...n})}):a(n)}}}]);